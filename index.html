<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IG Nation</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="icomoon/icomoon.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/vendor.css">
    <link rel="stylesheet" type="text/css" href="style.css?v=4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;600;700&family=Roboto+Slab&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <style>
        body {
            background-color: transparent;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
        }

        /* Global Smooth Transitions */
        * {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Section Transitions */
        section {
            position: relative;
            overflow: hidden;
        }

        /* Smooth Scroll Behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Fade In Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Intersection Observer Animation Classes */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animate-on-scroll.animated {
            opacity: 1;
            transform: translateY(0);
        }

        .animate-on-scroll-left {
            opacity: 0;
            transform: translateX(-30px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animate-on-scroll-left.animated {
            opacity: 1;
            transform: translateX(0);
        }

        .animate-on-scroll-right {
            opacity: 0;
            transform: translateX(30px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animate-on-scroll-right.animated {
            opacity: 1;
            transform: translateX(0);
        }

        .animate-on-scroll-scale {
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .animate-on-scroll-scale.animated {
            opacity: 1;
            transform: scale(1);
        }

        /* Stagger Animation Delays */
        .animate-delay-1 { transition-delay: 0.1s; }
        .animate-delay-2 { transition-delay: 0.2s; }
        .animate-delay-3 { transition-delay: 0.3s; }
        .animate-delay-4 { transition-delay: 0.4s; }
        .animate-delay-5 { transition-delay: 0.5s; }
        .animate-delay-6 { transition-delay: 0.6s; }

        /* Floating Animation */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        .floating-delayed {
            animation: float 6s ease-in-out infinite;
            animation-delay: 3s;
        }

        /* Gradient Text Animation */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .gradient-text {
            background: linear-gradient(-45deg, #667eea, #764ba2, #ffd700, #ffed4e);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease infinite;
        }

        /* Parallax Effect */
        .parallax-element {
            transform: translateZ(0);
            will-change: transform;
        }

        /* Section Spacing */
        section {
            margin-bottom: 0;
        }

        /* Consistent Card Shadows */
        .unified-card {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .unified-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            transform: translateY(-5px);
        }

        /* Consistent Button Styles */
        .unified-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            color: white;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .unified-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .unified-button:hover::before {
            left: 100%;
        }

        .unified-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        /* Course Card Styles */
        .course-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            height: 100%;
        }

        .course-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .course-image {
            position: relative;
            height: 250px;
            overflow: hidden;
        }

        .course-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .course-card:hover .course-image img {
            transform: scale(1.05);
        }

        .course-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .featured-badge {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
        }

        .favorite-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .favorite-button:hover {
            transform: scale(1.1);
            background: #dc3545;
            color: white;
        }

        .course-content {
            padding: 2rem;
        }

        .course-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .course-description {
            color: #64748b;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .instructor-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .instructor-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .instructor-info {
            flex: 1;
        }

        .instructor-name {
            font-weight: 600;
            color: #1e293b;
            margin: 0;
            font-size: 0.95rem;
        }

        .instructor-board {
            color: #64748b;
            margin: 0;
            font-size: 0.85rem;
        }

        .rating-section {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .star-rating {
            display: flex;
            gap: 2px;
        }

        .star {
            color: #fbbf24;
            font-size: 1rem;
        }

        .rating-text {
            color: #64748b;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .pricing-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .price-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .current-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
        }

        .original-price {
            font-size: 1rem;
            color: #94a3b8;
            text-decoration: line-through;
        }

        .discount-badge {
            background: #dc2626;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .course-actions {
            display: flex;
            gap: 1rem;
        }

        .enroll-button, .cart-button {
            flex: 1;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: none;
            cursor: pointer;
        }

        .enroll-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .enroll-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .cart-button {
            background: #f1f5f9;
            color: #64748b;
            border: 2px solid #e2e8f0;
        }

        .cart-button:hover {
            background: #1e3d6f;
            color: white;
            border-color: #1e3d6f;
            transform: translateY(-2px);
        }

        /* Filter Styles */
        .subject-filters {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .subject-filter {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            color: #64748b;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .subject-filter:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .subject-filter.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .filter-count {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-left: 8px;
            min-width: 20px;
            text-align: center;
        }

        .subject-filter.active .filter-count {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        /* Sort Option Styles */
        .sort-option {
            background: white;
            border: 2px solid #e2e8f0;
            color: #64748b;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sort-option:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .sort-option.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        /* WhatsApp Chat Button Styles */
        .nav-link[onclick="openWhatsAppChat()"] {
            transition: all 0.3s ease !important;
            box-shadow: 0 2px 8px rgba(37, 211, 102, 0.3) !important;
        }

        .nav-link[onclick="openWhatsAppChat()"]:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4) !important;
            background: linear-gradient(135deg, #128c7e, #25d366) !important;
        }

        .nav-link[onclick="openWhatsAppChat()"]:active {
            transform: translateY(0) !important;
            box-shadow: 0 2px 8px rgba(37, 211, 102, 0.3) !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .subject-filters {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }
            
            .subject-filter {
                width: 100%;
                max-width: 200px;
                justify-content: center;
            }
            
            .sort-section {
                margin-top: 1rem;
            }
            
            .sort-section .d-flex {
                justify-content: center !important;
            }
            
            .course-actions {
                flex-direction: column;
            }

            /* WhatsApp button responsive */
            .nav-link[onclick="openWhatsAppChat()"] {
                padding: 6px 12px !important;
                font-size: 0.85rem !important;
            }
        }
    </style>
</head>
<body>
<!-- Top Utility Bar -->
<div class="top-utility-bar" style="position:relative; height:60px;">
  <div class="container-fluid" style="position:relative; height:100%;">
    
    <!-- Centered Logo -->
    <div style="position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);">
      <a href="index.html">
        <img src="images/ig-nation-logo-graduation.png" alt="IG Nation" style="height:45px; width:auto; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); transition: all 0.3s ease;">
      </a>
    </div>

      <!-- Right-aligned Utility Links -->
      <div style="position:absolute; right:20px; top:50%; transform:translateY(-50%); display:flex; align-items:center; gap:15px; font-size:13px;">
        
        <!-- User Name Display -->
        <div id="userNameDisplay" style="display:none;">
          <span class="text-primary fw-bold" id="displayUserName">User</span>
        </div>

        <!-- Cart Button -->
        <a href="#" class="utility-link" data-bs-toggle="modal" data-bs-target="#cartModal" style="text-decoration:none; color:#000; display:flex; align-items:center; position:relative;">
          <iconify-icon icon="material-symbols:shopping-cart" style="margin-right:5px;"></iconify-icon>
          Cart <span class="badge bg-primary ms-1" id="cartCount">0</span>
        </a>

        <!-- Favorites -->
        <a href="#" class="utility-link" data-bs-toggle="modal" data-bs-target="#favoritesModal" style="text-decoration:none; color:#000; display:flex; align-items:center;">
          <iconify-icon icon="material-symbols:favorite" style="margin-right:5px;"></iconify-icon>
          Favorites
        </a>
      </div>
  </div>
</div>

    <!-- Main Navigation Bar -->
    <nav class="main-navigation">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-7">
                    <ul class="nav-menu d-flex list-unstyled mb-0">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link active">Home</a>
                        </li>
                        <li class="nav-item">
                            <a href="courses.html" class="nav-link">Courses</a>
                        </li>
                        <li class="nav-item">
                            <a href="about.html" class="nav-link">About Us</a>
                        </li>
                        <li class="nav-item">
                            <a href="contact.html" class="nav-link">Contact Us</a>
                        </li>
                        <li class="nav-item">
                            <!-- FAQ removed -->
                        </li>
                        <li class="nav-item">
                            <a href="community.html" class="nav-link">Community</a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" onclick="openWhatsAppChat()" style="background: linear-gradient(135deg, #25d366, #128c7e); color: white; border-radius: 20px; padding: 8px 16px; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                                <iconify-icon icon="logos:whatsapp-icon" style="font-size: 1.1rem;"></iconify-icon>
                                Chat with Staff
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-5">
                    <div class="d-flex justify-content-end align-items-center gap-2">
                        <a href="#" class="btn btn-outline-secondary login-btn" data-bs-toggle="modal" data-bs-target="#loginModal" style="font-size: 14px; padding: 8px 16px;">
                            <iconify-icon icon="material-symbols:login" class="me-1"></iconify-icon>
                            Login
                        </a>
                        <a href="#" class="btn btn-primary register-btn" data-bs-toggle="modal" data-bs-target="#registerModal" style="font-size: 14px; padding: 8px 16px;">
                            <iconify-icon icon="material-symbols:person-add" class="me-1"></iconify-icon>
                            Register Now
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

        <!-- Hero Section -->
        <section id="hero" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 120px 0; position: relative; overflow: hidden; min-height: 100vh; display: flex; align-items: center;">
            <!-- Background Elements -->
            <div class="parallax-element floating" style="position: absolute; top: -100px; right: -100px; width: 400px; height: 400px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; z-index: 1;"></div>
            <div class="parallax-element floating-delayed" style="position: absolute; bottom: -150px; left: -150px; width: 500px; height: 500px; background: rgba(255, 255, 255, 0.05); border-radius: 50%; z-index: 1;"></div>
            <div class="parallax-element" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; height: 300px; background: rgba(255, 255, 255, 0.03); border-radius: 50%; z-index: 1;"></div>
            
            <!-- Floating Elements -->
            <div class="parallax-element floating" style="position: absolute; top: 20%; left: 10%; width: 60px; height: 60px; background: rgba(255, 255, 255, 0.1); border-radius: 15px; z-index: 2;"></div>
            <div class="parallax-element floating-delayed" style="position: absolute; top: 30%; right: 15%; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.08); border-radius: 50%; z-index: 2;"></div>
            <div class="parallax-element floating" style="position: absolute; bottom: 25%; left: 20%; width: 50px; height: 50px; background: rgba(255, 255, 255, 0.06); border-radius: 12px; z-index: 2;"></div>
        
            <div class="container" style="position: relative; z-index: 3;">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <div class="animate-on-scroll animate-delay-1" style="margin-bottom: 30px;">
                            <div style="display: inline-block; background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); padding: 8px 20px; border-radius: 25px; margin-bottom: 20px; border: 1px solid rgba(255, 255, 255, 0.3);">
                                <span style="color: white; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">ðŸš€ Future of Learning</span>
                            </div>
                        </div>
                        
                        <h1 class="animate-on-scroll animate-delay-2" style="font-size: 3.5rem; font-weight: 800; color: white; margin-bottom: 25px; line-height: 1.2; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                            Transform Your 
                            <span class="gradient-text">Learning Journey</span>
                        </h1>
                        
                        <p class="animate-on-scroll animate-delay-3" style="font-size: 1.3rem; color: rgba(255, 255, 255, 0.9); margin-bottom: 40px; line-height: 1.6; font-weight: 300;">
                            Discover a world of knowledge with our innovative online learning platform. Expert teachers, interactive content, and personalized support for every learner.
                        </p>
                        
                        <div class="animate-on-scroll animate-delay-4" style="display: flex; gap: 20px; flex-wrap: wrap; align-items: center;">
                            <button class="unified-button" onclick="window.location.href='courses.html'" style="background: linear-gradient(135deg, #ffd700, #ffed4e); color: #1e293b; padding: 18px 35px; font-size: 1.1rem; display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <iconify-icon icon="material-symbols:rocket-launch" style="font-size: 1.3rem;"></iconify-icon>
                                Get Started
                            </button>
                            
                            <button onclick="openVideoModal()" style="background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid rgba(255, 255, 255, 0.3); padding: 18px 35px; border-radius: 50px; font-weight: 600; font-size: 1.1rem; backdrop-filter: blur(10px); transition: all 0.3s ease; display: flex; align-items: center; gap: 10px; cursor: pointer;"
                                    onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'; this.style.transform='translateY(-3px)'" 
                                    onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.transform='translateY(0)'">
                                <iconify-icon icon="material-symbols:play-circle" style="font-size: 1.3rem;"></iconify-icon>
                                Watch Demo
                            </button>
                        </div>
                        
                        <!-- Stats -->
                        <div class="animate-on-scroll animate-delay-5" style="display: flex; gap: 40px; margin-top: 50px; flex-wrap: wrap;">
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 800; color: #ffd700; margin-bottom: 5px;">1000+</div>
                                <div style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; font-weight: 500;">Learners</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 800; color: #ffd700; margin-bottom: 5px;">50+</div>
                                <div style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; font-weight: 500;">Courses</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 800; color: #ffd700; margin-bottom: 5px;">24/7</div>
                                <div style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; font-weight: 500;">Access</div>
                            </div>
                        </div>
                    </div>
                
                    <div class="col-lg-6">
                        <div class="animate-on-scroll-right animate-delay-3" style="position: relative; text-align: center;">
                            <!-- Main Hero Image -->
                            <div style="position: relative; display: inline-block;">
                                <img src="images/online-learning-hero-new.jpg" alt="Online Learning Platform" 
                                     class="unified-card"
                                     style="width: 100%; max-width: 500px; height: auto; border-radius: 30px; transition: transform 0.3s ease;"
                                     onmouseover="this.style.transform='scale(1.02)'" 
                                     onmouseout="this.style.transform='scale(1)'">
                                
                                <!-- Floating Cards -->
                                <div class="floating animate-on-scroll-scale animate-delay-4" style="position: absolute; top: -20px; right: -20px; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <iconify-icon icon="material-symbols:school" style="color: white; font-size: 1.2rem;"></iconify-icon>
                                        </div>
                                        <div>
                                            <div style="font-weight: 700; color: #1e293b; font-size: 0.9rem;">Expert Teachers</div>
                                            <div style="color: #64748b; font-size: 0.8rem;">Qualified Instructors</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="floating-delayed animate-on-scroll-scale animate-delay-5" style="position: absolute; bottom: -20px; left: -20px; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <iconify-icon icon="material-symbols:schedule" style="color: white; font-size: 1.2rem;"></iconify-icon>
                                        </div>
                                        <div>
                                            <div style="font-weight: 700; color: #1e293b; font-size: 0.9rem;">Flexible Learning</div>
                                            <div style="color: #64748b; font-size: 0.8rem;">Learn at Your Pace</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
        
        <!-- CSS Animation -->
        <style>
            @keyframes float {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-20px); }
            }
        </style>
    </section>

    <!-- Our Courses Section -->
    <section id="top-selling" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 100px 0; position: relative; overflow: hidden;">
        <!-- Background Elements -->
        <div style="position: absolute; top: -50px; right: -50px; width: 200px; height: 200px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-radius: 50%; z-index: 1;"></div>
        <div style="position: absolute; bottom: -100px; left: -100px; width: 300px; height: 300px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05)); border-radius: 50%; z-index: 1;"></div>
        
        <div class="container" style="position: relative; z-index: 2;">
            <!-- Section Header -->
            <div class="text-center mb-5">
                <div class="animate-on-scroll animate-delay-1" style="display: inline-block; background: linear-gradient(135deg, #667eea, #764ba2); padding: 8px 24px; border-radius: 50px; margin-bottom: 20px;">
                    <span style="color: white; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Premium Education</span>
                </div>
                <h2 class="animate-on-scroll animate-delay-2" style="font-size: 3.5rem; font-weight: 800; color: #1e293b; margin-bottom: 1.5rem; line-height: 1.2;">
                    Our <span class="gradient-text">Courses</span>
                </h2>
                <p class="animate-on-scroll animate-delay-3" style="font-size: 1.2rem; color: #64748b; max-width: 600px; margin: 0 auto; font-weight: 400;">
                    Discover world-class IGCSE courses designed by expert educators to help you achieve academic excellence
                </p>
            </div>
            
            <!-- Enhanced Course Filter and Sort Section -->
            <div class="row mb-5">
                <div class="col-12">
                    <div style="background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); padding: 3rem; border-radius: 32px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1); margin-bottom: 3rem; border: 1px solid rgba(255, 255, 255, 0.3); position: relative; overflow: hidden;">
                        <!-- Decorative Elements -->
                        <div style="position: absolute; top: -20px; right: -20px; width: 100px; height: 100px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-radius: 50%;"></div>
                        <div style="position: absolute; bottom: -30px; left: -30px; width: 80px; height: 80px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08)); border-radius: 50%;"></div>
                        
                        <div class="row align-items-center" style="position: relative; z-index: 2;">
                            <div class="col-lg-8 mb-4 mb-lg-0">
                                <div class="filter-section">
                                    <div class="d-flex align-items-center mb-4">
                                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-right: 15px; box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);">
                                            <iconify-icon icon="material-symbols:filter-list" style="color: white; font-size: 1.5rem;"></iconify-icon>
                                        </div>
                                        <h4 style="color: #1e293b; font-weight: 700; margin: 0; font-size: 1.5rem;">Filter Courses</h4>
                                    </div>
                                    <div class="subject-filters" style="display: flex; flex-wrap: wrap; gap: 12px;">
                                        <button class="subject-filter active" data-filter="*" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 12px 20px; border-radius: 25px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); display: flex; align-items: center; gap: 8px;">
                                            <iconify-icon icon="material-symbols:apps"></iconify-icon>
                                            All Courses
                                            <span class="filter-count" id="all-count" style="background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 12px; font-size: 0.8rem;">3</span>
                                        </button>
                                        <button class="subject-filter" data-filter=".mathematics" style="background: white; color: #64748b; border: 2px solid #e2e8f0; padding: 12px 20px; border-radius: 25px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                                            <iconify-icon icon="material-symbols:calculate"></iconify-icon>
                                            Mathematics
                                            <span class="filter-count" id="math-count" style="background: #f1f5f9; color: #64748b; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem;">1</span>
                                        </button>
                                        <button class="subject-filter" data-filter=".physics" style="background: white; color: #64748b; border: 2px solid #e2e8f0; padding: 12px 20px; border-radius: 25px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                                            <iconify-icon icon="material-symbols:science"></iconify-icon>
                                            Physics
                                            <span class="filter-count" id="physics-count" style="background: #f1f5f9; color: #64748b; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem;">1</span>
                                        </button>
                                        <button class="subject-filter" data-filter=".chemistry" style="background: white; color: #64748b; border: 2px solid #e2e8f0; padding: 12px 20px; border-radius: 25px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                                            <iconify-icon icon="material-symbols:biotech"></iconify-icon>
                                            Chemistry
                                            <span class="filter-count" id="chemistry-count" style="background: #f1f5f9; color: #64748b; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem;">0</span>
                                        </button>
                                        <button class="subject-filter" data-filter=".english" style="background: white; color: #64748b; border: 2px solid #e2e8f0; padding: 12px 20px; border-radius: 25px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;">
                                            <iconify-icon icon="material-symbols:menu-book"></iconify-icon>
                                            English
                                            <span class="filter-count" id="english-count" style="background: #f1f5f9; color: #64748b; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem;">1</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="sort-section">
                                    <div class="d-flex align-items-center justify-content-end mb-3">
                                        <h6 style="color: #64748b; font-weight: 600; margin: 0 15px 0 0; font-size: 1rem;">Sort by:</h6>
                                        <button class="sort-option active" data-sort="featured" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 12px 20px; border-radius: 25px; font-weight: 600; font-size: 0.9rem; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); display: flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
                                            <iconify-icon icon="material-symbols:star"></iconify-icon>
                                            Featured
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Course Cards -->
            <div class="row g-4 isotope-container">
                <div class="col-lg-4 col-md-6 item mathematics">
                    <div style="background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(102, 126, 234, 0.1); position: relative;" 
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        
                        <!-- Course Image -->
                        <div style="position: relative; overflow: hidden; height: 220px;">
                            <a href="course-details.html?course=mathematics">
                                <img src="images/teacher1.PNG" class="img-fluid" alt="IGCSE Mathematics Course" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease;" 
                                     onmouseover="this.style.transform='scale(1.05)'" 
                                     onmouseout="this.style.transform='scale(1)'">
                            </a>
                            
                            <!-- Course Badge -->
                            <div style="position: absolute; top: 20px; left: 20px; background: linear-gradient(135deg, #ffd700, #ffed4e); color: #1e293b; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 0.8rem; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); display: flex; align-items: center; gap: 6px;">
                                <iconify-icon icon="material-symbols:star" style="font-size: 1rem;"></iconify-icon>
                                Featured
                            </div>
                            
                            <!-- Favorite Button -->
                            <button class="favorite-button" data-course="mathematics" onclick="toggleFavorite('mathematics')" 
                                    style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; backdrop-filter: blur(10px);"
                                    onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.transform='scale(1.1)'" 
                                    onmouseout="this.style.background='rgba(255, 255, 255, 0.9)'; this.style.transform='scale(1)'">
                                <iconify-icon icon="mdi:heart-outline" style="font-size: 1.2rem; color: #dc3545;"></iconify-icon>
                            </button>
                        </div>
                        
                        <!-- Course Content -->
                        <div style="padding: 30px;">
                            <a href="course-details.html?course=mathematics" style="text-decoration: none;">
                                <h5 style="font-size: 1.4rem; font-weight: 700; color: #1e293b; margin-bottom: 12px; line-height: 1.3;">IGCSE Mathematics (Extended)</h5>
                            </a>
                            <p style="color: #64748b; line-height: 1.6; margin-bottom: 20px; font-size: 0.95rem;">Master advanced mathematical concepts with comprehensive coverage of IGCSE Extended Mathematics curriculum.</p>
                            
                            <!-- Instructor Card -->
                            <div style="display: flex; align-items: center; margin-bottom: 20px; padding: 15px; background: #f8fafc; border-radius: 15px;">
                                <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 0.9rem; margin-right: 12px;">SM</div>
                                <div>
                                    <p style="font-weight: 600; color: #1e293b; margin: 0; font-size: 0.9rem;">Dr. Sarah Mitchell</p>
                                    <p style="color: #64748b; margin: 0; font-size: 0.8rem;">Cambridge Board</p>
                                </div>
                            </div>
                            
                            <!-- Rating Section -->
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="display: flex; align-items: center; gap: 4px;">
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                </div>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500;">4.9 (127 reviews)</span>
                            </div>
                            
                            <!-- Pricing Section -->
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">299.00 EGP</span>
                                    <span style="font-size: 1rem; color: #94a3b8; text-decoration: line-through;">399.00 EGP</span>
                                </div>
                                <div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">25% OFF</div>
                            </div>
                            
                            <!-- Course Actions -->
                            <div style="display: flex; gap: 12px;">
                                <button onclick="alert('Math button clicked! Function exists: ' + (typeof window.enrollInCourse)); console.log('Button clicked!'); if(typeof enrollInCourse === 'function') { enrollInCourse('mathematics'); } else { alert('enrollInCourse function not found!'); }" 
                                        style="flex: 1; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 14px 20px; border-radius: 15px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); display: flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer;"
                                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.4)'" 
                                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.3)'">
                                    <iconify-icon icon="material-symbols:play-arrow"></iconify-icon>
                                    Enroll Now
                                </button>
                                <button class="cart-button" data-course="mathematics" onclick="addToCart('mathematics')" 
                                        style="background: white; color: #667eea; border: 2px solid #667eea; padding: 14px 20px; border-radius: 15px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;"
                                        onmouseover="this.style.background='#667eea'; this.style.color='white'; this.style.transform='translateY(-2px)'" 
                                        onmouseout="this.style.background='white'; this.style.color='#667eea'; this.style.transform='translateY(0)'">
                                    <iconify-icon icon="material-symbols:add-shopping-cart"></iconify-icon>
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 item physics">
                    <div style="background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(102, 126, 234, 0.1); position: relative;" 
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        
                        <!-- Course Image -->
                        <div style="position: relative; overflow: hidden; height: 220px;">
                            <a href="course-details.html?course=physics">
                                <img src="images/teacher2.PNG" class="img-fluid" alt="IGCSE Physics Course" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease;" 
                                     onmouseover="this.style.transform='scale(1.05)'" 
                                     onmouseout="this.style.transform='scale(1)'">
                            </a>
                            
                            <!-- Course Badge -->
                            <div style="position: absolute; top: 20px; left: 20px; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 0.8rem; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); display: flex; align-items: center; gap: 6px;">
                                <iconify-icon icon="material-symbols:science" style="font-size: 1rem;"></iconify-icon>
                                Popular
                            </div>
                            
                            <!-- Favorite Button -->
                            <button class="favorite-button" data-course="physics" onclick="toggleFavorite('physics')" 
                                    style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; backdrop-filter: blur(10px);"
                                    onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.transform='scale(1.1)'" 
                                    onmouseout="this.style.background='rgba(255, 255, 255, 0.9)'; this.style.transform='scale(1)'">
                                <iconify-icon icon="mdi:heart-outline" style="font-size: 1.2rem; color: #dc3545;"></iconify-icon>
                            </button>
                        </div>
                        
                        <!-- Course Content -->
                        <div style="padding: 30px;">
                            <a href="course-details.html?course=physics" style="text-decoration: none;">
                                <h5 style="font-size: 1.4rem; font-weight: 700; color: #1e293b; margin-bottom: 12px; line-height: 1.3;">IGCSE Physics (Extended)</h5>
                            </a>
                            <p style="color: #64748b; line-height: 1.6; margin-bottom: 20px; font-size: 0.95rem;">Master fundamental physics concepts with comprehensive coverage of IGCSE Extended Physics curriculum including mechanics, waves, and electricity.</p>
                            
                            <!-- Instructor Card -->
                            <div style="display: flex; align-items: center; margin-bottom: 20px; padding: 15px; background: #f8fafc; border-radius: 15px;">
                                <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 0.9rem; margin-right: 12px;">MC</div>
                                <div>
                                    <p style="font-weight: 600; color: #1e293b; margin: 0; font-size: 0.9rem;">Prof. Michael Chen</p>
                                    <p style="color: #64748b; margin: 0; font-size: 0.8rem;">Edexcel Board</p>
                                </div>
                            </div>
                            
                            <!-- Rating Section -->
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="display: flex; align-items: center; gap: 4px;">
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                </div>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500;">4.8 (98 reviews)</span>
                            </div>
                            
                            <!-- Pricing Section -->
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">279.00 EGP</span>
                                    <span style="font-size: 1rem; color: #94a3b8; text-decoration: line-through;">349.00 EGP</span>
                                </div>
                                <div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">20% OFF</div>
                            </div>
                            
                            <!-- Course Actions -->
                            <div style="display: flex; gap: 12px;">
                                <button onclick="console.log('Physics button clicked!'); if(typeof enrollInCourse === 'function') { enrollInCourse('physics'); } else { alert('enrollInCourse function not found!'); }" 
                                        style="flex: 1; background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 14px 20px; border-radius: 15px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); display: flex; align-items: center; justify-content: center; gap: 8px;"
                                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(16, 185, 129, 0.4)'" 
                                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(16, 185, 129, 0.3)'">
                                    <iconify-icon icon="material-symbols:play-arrow"></iconify-icon>
                                    Enroll Now
                                </button>
                                <button class="cart-button" data-course="physics" onclick="addToCart('physics')" 
                                        style="background: white; color: #10b981; border: 2px solid #10b981; padding: 14px 20px; border-radius: 15px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;"
                                        onmouseover="this.style.background='#10b981'; this.style.color='white'; this.style.transform='translateY(-2px)'" 
                                        onmouseout="this.style.background='white'; this.style.color='#10b981'; this.style.transform='translateY(0)'">
                                    <iconify-icon icon="material-symbols:add-shopping-cart"></iconify-icon>
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-6 item english">
                    <div style="background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(102, 126, 234, 0.1); position: relative;" 
                         onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        
                        <!-- Course Image -->
                        <div style="position: relative; overflow: hidden; height: 220px;">
                            <a href="course-details.html?course=english">
                                <img src="images/teacher3.PNG" class="img-fluid" alt="IGCSE English Language Course" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease;" 
                                     onmouseover="this.style.transform='scale(1.05)'" 
                                     onmouseout="this.style.transform='scale(1)'">
                            </a>
                            
                            <!-- Course Badge -->
                            <div style="position: absolute; top: 20px; left: 20px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 0.8rem; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3); display: flex; align-items: center; gap: 6px;">
                                <iconify-icon icon="material-symbols:star" style="font-size: 1rem;"></iconify-icon>
                                Featured
                            </div>
                            
                            <!-- Favorite Button -->
                            <button class="favorite-button" data-course="english" onclick="toggleFavorite('english')" 
                                    style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; backdrop-filter: blur(10px);"
                                    onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.transform='scale(1.1)'" 
                                    onmouseout="this.style.background='rgba(255, 255, 255, 0.9)'; this.style.transform='scale(1)'">
                                <iconify-icon icon="mdi:heart-outline" style="font-size: 1.2rem; color: #dc3545;"></iconify-icon>
                            </button>
                        </div>
                        
                        <!-- Course Content -->
                        <div style="padding: 30px;">
                            <a href="course-details.html?course=english" style="text-decoration: none;">
                                <h5 style="font-size: 1.4rem; font-weight: 700; color: #1e293b; margin-bottom: 12px; line-height: 1.3;">IGCSE English Language</h5>
                            </a>
                            <p style="color: #64748b; line-height: 1.6; margin-bottom: 20px; font-size: 0.95rem;">Master English language skills with comprehensive coverage of reading, writing, speaking, and listening for IGCSE success.</p>
                            
                            <!-- Instructor Card -->
                            <div style="display: flex; align-items: center; margin-bottom: 20px; padding: 15px; background: #f8fafc; border-radius: 15px;">
                                <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 0.9rem; margin-right: 12px;">ER</div>
                                <div>
                                    <p style="font-weight: 600; color: #1e293b; margin: 0; font-size: 0.9rem;">Dr. Emily Rodriguez</p>
                                    <p style="color: #64748b; margin: 0; font-size: 0.8rem;">Cambridge Board</p>
                                </div>
                            </div>
                            
                            <!-- Rating Section -->
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="display: flex; align-items: center; gap: 4px;">
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                    <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                </div>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500;">4.9 (156 reviews)</span>
                            </div>
                            
                            <!-- Pricing Section -->
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span style="font-size: 1.5rem; font-weight: 700; color: #1e293b;">249.00 EGP</span>
                                    <span style="font-size: 1rem; color: #94a3b8; text-decoration: line-through;">329.00 EGP</span>
                                </div>
                                <div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">24% OFF</div>
                            </div>
                            
                            <!-- Course Actions -->
                            <div style="display: flex; gap: 12px;">
                                <button onclick="console.log('English button clicked!'); if(typeof enrollInCourse === 'function') { enrollInCourse('english'); } else { alert('enrollInCourse function not found!'); }" 
                                        style="flex: 1; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 14px 20px; border-radius: 15px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3); display: flex; align-items: center; justify-content: center; gap: 8px;"
                                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(139, 92, 246, 0.4)'" 
                                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(139, 92, 246, 0.3)'">
                                    <iconify-icon icon="material-symbols:play-arrow"></iconify-icon>
                                    Enroll Now
                                </button>
                                <button class="cart-button" data-course="english" onclick="addToCart('english')" 
                                        style="background: white; color: #8b5cf6; border: 2px solid #8b5cf6; padding: 14px 20px; border-radius: 15px; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 8px;"
                                        onmouseover="this.style.background='#8b5cf6'; this.style.color='white'; this.style.transform='translateY(-2px)'" 
                                        onmouseout="this.style.background='white'; this.style.color='#8b5cf6'; this.style.transform='translateY(0)'">
                                    <iconify-icon icon="material-symbols:add-shopping-cart"></iconify-icon>
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Why Choose Us Section -->
    <section id="service" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 100px 0; position: relative; overflow: hidden;">
        <!-- Background Pattern -->
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.1;">
            <div style="background-image: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><defs><pattern id=\"grain\" width=\"100\" height=\"100\" patternUnits=\"userSpaceOnUse\"><circle cx=\"25\" cy=\"25\" r=\"1\" fill=\"white\"/><circle cx=\"75\" cy=\"75\" r=\"1\" fill=\"white\"/><circle cx=\"50\" cy=\"10\" r=\"0.5\" fill=\"white\"/><circle cx=\"10\" cy=\"60\" r=\"0.5\" fill=\"white\"/><circle cx=\"90\" cy=\"40\" r=\"0.5\" fill=\"white\"/></pattern></defs><rect width=\"100\" height=\"100\" fill=\"url(%23grain)\"/></svg>'); background-size: 200px 200px;"></div>
        </div>
        
        <div class="container" style="position: relative; z-index: 2;">
            <div class="text-center mb-5">
                <h2 style="font-size: 3rem; font-weight: 800; color: white; margin-bottom: 1rem; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                    Why Choose <span style="background: linear-gradient(45deg, #ffd700, #ffed4e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">IG Nation</span>
                </h2>
                <p style="font-size: 1.2rem; color: rgba(255,255,255,0.9); max-width: 600px; margin: 0 auto; font-weight: 300;">
                    Experience world-class education with cutting-edge technology and expert guidance
                </p>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0,0,0,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.1)'">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);">
                            <iconify-icon icon="material-symbols:school" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; color: #1e293b; margin-bottom: 15px;">Dual Teaching System</h4>
                        <p style="color: #64748b; line-height: 1.6; font-size: 1rem;">Learn from both expert teachers and dedicated assistants for deeper understanding and real-time support.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0,0,0,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.1)'">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);">
                            <iconify-icon icon="material-symbols:schedule" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; color: #1e293b; margin-bottom: 15px;">Comprehensive Recorded Library</h4>
                        <p style="color: #64748b; line-height: 1.6; font-size: 1rem;">Access trimmed, timestamped sessions with solved PDFs â€” available anytime for revision and catch-up.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0,0,0,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.1)'">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);">
                            <iconify-icon icon="material-symbols:support" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; color: #1e293b; margin-bottom: 15px;">Smart Practice & Quizzes</h4>
                        <p style="color: #64748b; line-height: 1.6; font-size: 1rem;">Strengthen learning with mini quizzes, mock exams, and auto-graded assignments â€” designed for IGCSE mastery.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0,0,0,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.1)'">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);">
                            <iconify-icon icon="material-symbols:analytics" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; color: #1e293b; margin-bottom: 15px;">Advanced Progress Tracking</h4>
                        <p style="color: #64748b; line-height: 1.6; font-size: 1rem;">Get daily, weekly, and monthly performance reports with parent alerts and estimated grade predictions.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0,0,0,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.1)'">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);">
                            <iconify-icon icon="material-symbols:workspace-premium" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; color: #1e293b; margin-bottom: 15px;">24/7 Learning Community</h4>
                        <p style="color: #64748b; line-height: 1.6; font-size: 1rem;">Receive instant help from assistants, peers, and live Q&A sessions within each subject's active community.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: 40px 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(10px);" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0,0,0,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0,0,0,0.1)'">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);">
                            <iconify-icon icon="material-symbols:groups" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h4 style="font-size: 1.5rem; font-weight: 700; color: #1e293b; margin-bottom: 15px;">Motivation & Rewards System</h4>
                        <p style="color: #64748b; line-height: 1.6; font-size: 1rem;">Stay consistent with leaderboards, badges, and achievement milestones for quizzes, past papers, and attendance.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Achievement Section -->
    <section id="achivement" style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 100px 0; position: relative; overflow: hidden;">
        <!-- Background Elements -->
        <div style="position: absolute; top: -50px; left: -50px; width: 200px; height: 200px; background: rgba(102, 126, 234, 0.1); border-radius: 50%; z-index: 1;"></div>
        <div style="position: absolute; bottom: -100px; right: -100px; width: 300px; height: 300px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; z-index: 1;"></div>
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 150px; height: 150px; background: rgba(255, 215, 0, 0.05); border-radius: 50%; z-index: 1;"></div>
        
        <div class="container" style="position: relative; z-index: 2;">
            <div class="text-center mb-5">
                <div class="animate-on-scroll animate-delay-1" style="display: inline-block; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); padding: 8px 24px; border-radius: 50px; margin-bottom: 20px; border: 1px solid rgba(255, 255, 255, 0.2);">
                    <span style="color: #ffd700; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Our Impact</span>
                </div>
                <h2 class="animate-on-scroll animate-delay-2" style="font-size: 3rem; font-weight: 800; color: white; margin-bottom: 1rem; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                    Numbers That <span class="gradient-text">Speak</span>
                </h2>
                <p class="animate-on-scroll animate-delay-3" style="font-size: 1.2rem; color: rgba(255,255,255,0.8); max-width: 600px; margin: 0 auto; font-weight: 300;">
                    Join thousands of successful learners who have transformed their education with us
                </p>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="animate-on-scroll-scale animate-delay-1" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); border-radius: 24px; padding: 40px 30px; text-align: center; border: 1px solid rgba(255,255,255,0.2); transition: all 0.4s ease; position: relative; overflow: hidden;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.background='rgba(255,255,255,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.background='rgba(255,255,255,0.1)'">
                        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; opacity: 0.1;"></div>
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); position: relative; z-index: 2;">
                            <iconify-icon icon="material-symbols:topic" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h3 style="font-size: 3rem; font-weight: 800; color: #ffd700; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">500+</h3>
                        <h4 style="font-size: 1.3rem; font-weight: 700; color: white; margin-bottom: 8px;">Learning Topics</h4>
                        <p style="color: rgba(255,255,255,0.7); font-size: 0.95rem; font-weight: 400;">Comprehensive curriculum coverage</p>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="animate-on-scroll-scale animate-delay-2" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); border-radius: 24px; padding: 40px 30px; text-align: center; border: 1px solid rgba(255,255,255,0.2); transition: all 0.4s ease; position: relative; overflow: hidden;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.background='rgba(255,255,255,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.background='rgba(255,255,255,0.1)'">
                        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; opacity: 0.1;"></div>
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3); position: relative; z-index: 2;">
                            <iconify-icon icon="material-symbols:school" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h3 style="font-size: 3rem; font-weight: 800; color: #ffd700; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">2,500+</h3>
                        <h4 style="font-size: 1.3rem; font-weight: 700; color: white; margin-bottom: 8px;">Active Learners</h4>
                        <p style="color: rgba(255,255,255,0.7); font-size: 0.95rem; font-weight: 400;">Building bright futures</p>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="animate-on-scroll-scale animate-delay-3" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); border-radius: 24px; padding: 40px 30px; text-align: center; border: 1px solid rgba(255,255,255,0.2); transition: all 0.4s ease; position: relative; overflow: hidden;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.background='rgba(255,255,255,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.background='rgba(255,255,255,0.1)'">
                        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; opacity: 0.1;"></div>
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3); position: relative; z-index: 2;">
                            <iconify-icon icon="material-symbols:person" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h3 style="font-size: 3rem; font-weight: 800; color: #ffd700; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">150+</h3>
                        <h4 style="font-size: 1.3rem; font-weight: 700; color: white; margin-bottom: 8px;">Expert Instructors</h4>
                        <p style="color: rgba(255,255,255,0.7); font-size: 0.95rem; font-weight: 400;">Certified professionals</p>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="animate-on-scroll-scale animate-delay-4" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); border-radius: 24px; padding: 40px 30px; text-align: center; border: 1px solid rgba(255,255,255,0.2); transition: all 0.4s ease; position: relative; overflow: hidden;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.background='rgba(255,255,255,0.15)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.background='rgba(255,255,255,0.1)'">
                        <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 50%; opacity: 0.1;"></div>
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3); position: relative; z-index: 2;">
                            <iconify-icon icon="material-symbols:emoji-events" style="font-size: 2.5rem; color: white;"></iconify-icon>
                        </div>
                        <h3 style="font-size: 3rem; font-weight: 800; color: #ffd700; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">98%</h3>
                        <h4 style="font-size: 1.3rem; font-weight: 700; color: white; margin-bottom: 8px;">Success Rate</h4>
                        <p style="color: rgba(255,255,255,0.7); font-size: 0.95rem; font-weight: 400;">Proven excellence</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonial Section -->
    <section id="testimonial" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 100px 0; position: relative; overflow: hidden;">
        <!-- Background Elements -->
        <div style="position: absolute; top: -100px; left: -100px; width: 300px; height: 300px; background: rgba(102, 126, 234, 0.05); border-radius: 50%; z-index: 1;"></div>
        <div style="position: absolute; bottom: -150px; right: -150px; width: 400px; height: 400px; background: rgba(139, 92, 246, 0.05); border-radius: 50%; z-index: 1;"></div>
        <div style="position: absolute; top: 30%; right: 10%; width: 100px; height: 100px; background: rgba(255, 215, 0, 0.1); border-radius: 50%; z-index: 1;"></div>
        
        <div class="container" style="position: relative; z-index: 2;">
            <div class="text-center mb-5">
                <div style="display: inline-block; background: rgba(102, 126, 234, 0.1); padding: 8px 24px; border-radius: 50px; margin-bottom: 20px;">
                    <span style="color: #667eea; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">Student Voices</span>
                </div>
                <h2 style="font-size: 3rem; font-weight: 800; color: #1e293b; margin-bottom: 1rem;">
                    What Our <span style="background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Learners</span> Say
                </h2>
                <p style="font-size: 1.2rem; color: #64748b; max-width: 600px; margin: 0 auto; font-weight: 400;">
                    Real stories from students who have transformed their learning journey with us
                </p>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div style="background: white; border-radius: 24px; padding: 40px 30px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(102, 126, 234, 0.1); position: relative; height: 100%;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        <div style="position: absolute; top: -20px; left: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);">
                            <iconify-icon icon="material-symbols:format-quote" style="font-size: 1.5rem; color: white;"></iconify-icon>
                        </div>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                    <span style="color: white; font-weight: 700; font-size: 1.1rem;">AM</span>
                                </div>
                                <div>
                                    <h5 style="font-size: 1.1rem; font-weight: 700; color: #1e293b; margin: 0;">Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ</h5>
                                    <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Mathematics Student</p>
                                </div>
                            </div>
                            <p style="color: #64748b; line-height: 1.6; font-size: 1rem; margin-bottom: 20px; font-style: italic;">
                                "IG Nation completely transformed my understanding of mathematics. The teachers are incredibly patient and explain complex concepts in simple terms. I went from struggling with basic algebra to scoring A* in my exams."
                            </p>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500; margin-left: 8px;">5.0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: white; border-radius: 24px; padding: 40px 30px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(16, 185, 129, 0.1); position: relative; height: 100%;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        <div style="position: absolute; top: -20px; left: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);">
                            <iconify-icon icon="material-symbols:format-quote" style="font-size: 1.5rem; color: white;"></iconify-icon>
                        </div>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                    <span style="color: white; font-weight: 700; font-size: 1.1rem;">FS</span>
                                </div>
                                <div>
                                    <h5 style="font-size: 1.1rem; font-weight: 700; color: #1e293b; margin: 0;">ÙØ§Ø·Ù…Ø© Ø§Ù„Ø³ÙŠØ¯</h5>
                                    <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Physics Student</p>
                                </div>
                            </div>
                            <p style="color: #64748b; line-height: 1.6; font-size: 1rem; margin-bottom: 20px; font-style: italic;">
                                "The physics course at IG Nation is outstanding! The teaching methods helped me understand difficult concepts like electricity and magnetism. The practical examples made everything click."
                            </p>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500; margin-left: 8px;">5.0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: white; border-radius: 24px; padding: 40px 30px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(139, 92, 246, 0.1); position: relative; height: 100%;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        <div style="position: absolute; top: -20px; left: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(139, 92, 246, 0.3);">
                            <iconify-icon icon="material-symbols:format-quote" style="font-size: 1.5rem; color: white;"></iconify-icon>
                        </div>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                    <span style="color: white; font-weight: 700; font-size: 1.1rem;">MH</span>
                                </div>
                                <div>
                                    <h5 style="font-size: 1.1rem; font-weight: 700; color: #1e293b; margin: 0;">Ù…Ø­Ù…Ø¯ Ø­Ø³Ù†</h5>
                                    <p style="color: #64748b; margin: 0; font-size: 0.9rem;">English Student</p>
                                </div>
                            </div>
                            <p style="color: #64748b; line-height: 1.6; font-size: 1rem; margin-bottom: 20px; font-style: italic;">
                                "English was always my weakest subject, but IG Nation changed everything. The structured approach to essay writing and comprehension skills really helped me improve. I achieved a grade I never thought possible!"
                            </p>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500; margin-left: 8px;">5.0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: white; border-radius: 24px; padding: 40px 30px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(245, 158, 11, 0.1); position: relative; height: 100%;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        <div style="position: absolute; top: -20px; left: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);">
                            <iconify-icon icon="material-symbols:format-quote" style="font-size: 1.5rem; color: white;"></iconify-icon>
                        </div>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                    <span style="color: white; font-weight: 700; font-size: 1.1rem;">NA</span>
                                </div>
                                <div>
                                    <h5 style="font-size: 1.1rem; font-weight: 700; color: #1e293b; margin: 0;">Ù†ÙˆØ± Ø§Ù„Ø¯ÙŠÙ† Ø£Ø­Ù…Ø¯</h5>
                                    <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Chemistry Student</p>
                                </div>
                            </div>
                            <p style="color: #64748b; line-height: 1.6; font-size: 1rem; margin-bottom: 20px; font-style: italic;">
                                "The chemistry course exceeded my expectations. The step-by-step explanations of chemical reactions made everything clear. The practice tests were invaluable for my exam preparation."
                            </p>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500; margin-left: 8px;">5.0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: white; border-radius: 24px; padding: 40px 30px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(236, 72, 153, 0.1); position: relative; height: 100%;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        <div style="position: absolute; top: -20px; left: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #ec4899, #db2777); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(236, 72, 153, 0.3);">
                            <iconify-icon icon="material-symbols:format-quote" style="font-size: 1.5rem; color: white;"></iconify-icon>
                        </div>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #ec4899, #db2777); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                    <span style="color: white; font-weight: 700; font-size: 1.1rem;">YM</span>
                                </div>
                                <div>
                                    <h5 style="font-size: 1.1rem; font-weight: 700; color: #1e293b; margin: 0;">ÙŠØ§Ø³Ù…ÙŠÙ† Ù…Ø­Ù…ÙˆØ¯</h5>
                                    <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Biology Student</p>
                                </div>
                            </div>
                            <p style="color: #64748b; line-height: 1.6; font-size: 1rem; margin-bottom: 20px; font-style: italic;">
                                "Biology became my favorite subject thanks to IG Nation! The visual diagrams and interactive content made learning about cells and human anatomy so much easier."
                            </p>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500; margin-left: 8px;">5.0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div style="background: white; border-radius: 24px; padding: 40px 30px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08); transition: all 0.4s ease; border: 1px solid rgba(59, 130, 246, 0.1); position: relative; height: 100%;" 
                         onmouseover="this.style.transform='translateY(-10px)'; this.style.boxShadow='0 30px 60px rgba(0, 0, 0, 0.12)'" 
                         onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.08)'">
                        <div style="position: absolute; top: -20px; left: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);">
                            <iconify-icon icon="material-symbols:format-quote" style="font-size: 1.5rem; color: white;"></iconify-icon>
                        </div>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                    <span style="color: white; font-weight: 700; font-size: 1.1rem;">AK</span>
                                </div>
                                <div>
                                    <h5 style="font-size: 1.1rem; font-weight: 700; color: #1e293b; margin: 0;">Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø®Ø§Ù„Ø¯</h5>
                                    <p style="color: #64748b; margin: 0; font-size: 0.9rem;">Computer Science Student</p>
                                </div>
                            </div>
                            <p style="color: #64748b; line-height: 1.6; font-size: 1rem; margin-bottom: 20px; font-style: italic;">
                                "The computer science course at IG Nation is top-notch! The programming concepts were explained clearly with practical examples. I'm now confident about pursuing computer science at university level."
                            </p>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <iconify-icon icon="clarity:star-solid" style="color: #ffd700; font-size: 1.1rem;"></iconify-icon>
                                <span style="color: #64748b; font-size: 0.9rem; font-weight: 500; margin-left: 8px;">5.0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="footer" style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 80px 0 0; position: relative; overflow: hidden;">
        <!-- Background Elements -->
        <div style="position: absolute; top: -50px; left: -50px; width: 200px; height: 200px; background: rgba(102, 126, 234, 0.1); border-radius: 50%; z-index: 1;"></div>
        <div style="position: absolute; bottom: -100px; right: -100px; width: 300px; height: 300px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; z-index: 1;"></div>
        
        <div class="container" style="position: relative; z-index: 2;">
            <div class="row g-4">
                <!-- Company Info -->
                <div class="col-lg-4 col-md-6">
                    <div style="margin-bottom: 30px;">
                        <h3 style="font-size: 1.8rem; font-weight: 800; color: white; margin-bottom: 20px;">
                            IG <span style="background: linear-gradient(45deg, #ffd700, #ffed4e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Nation</span>
                        </h3>
                        <p style="color: rgba(255,255,255,0.8); line-height: 1.6; font-size: 1rem; margin-bottom: 30px;">
                            Transforming education through innovative online learning. Join thousands of students achieving academic excellence with our expert-led courses and cutting-edge technology.
                        </p>
                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <a href="#" style="width: 45px; height: 45px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);"
                               onmouseover="this.style.background='rgba(59, 130, 246, 0.8)'; this.style.transform='translateY(-3px)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">
                                <iconify-icon icon="ri:facebook-fill" style="color: white; font-size: 1.2rem;"></iconify-icon>
                            </a>
                            <a href="#" style="width: 45px; height: 45px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);"
                               onmouseover="this.style.background='rgba(29, 161, 242, 0.8)'; this.style.transform='translateY(-3px)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">
                                <iconify-icon icon="ri:twitter-fill" style="color: white; font-size: 1.2rem;"></iconify-icon>
                            </a>
                            <a href="#" style="width: 45px; height: 45px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);"
                               onmouseover="this.style.background='rgba(225, 48, 108, 0.8)'; this.style.transform='translateY(-3px)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">
                                <iconify-icon icon="ri:instagram-fill" style="color: white; font-size: 1.2rem;"></iconify-icon>
                            </a>
                            <a href="#" style="width: 45px; height: 45px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);"
                               onmouseover="this.style.background='rgba(255, 0, 0, 0.8)'; this.style.transform='translateY(-3px)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">
                                <iconify-icon icon="ri:youtube-fill" style="color: white; font-size: 1.2rem;"></iconify-icon>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6">
                    <div style="margin-bottom: 30px;">
                        <h5 style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px;">Quick Links</h5>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="margin-bottom: 12px;">
                                <a href="index.html" style="color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                   onmouseover="this.style.color='#ffd700'; this.style.transform='translateX(5px)'" 
                                   onmouseout="this.style.color='rgba(255,255,255,0.8)'; this.style.transform='translateX(0)'">
                                    <iconify-icon icon="material-symbols:arrow-forward" style="font-size: 0.8rem;"></iconify-icon>
                                    Home
                                </a>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="about.html" style="color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                   onmouseover="this.style.color='#ffd700'; this.style.transform='translateX(5px)'" 
                                   onmouseout="this.style.color='rgba(255,255,255,0.8)'; this.style.transform='translateX(0)'">
                                    <iconify-icon icon="material-symbols:arrow-forward" style="font-size: 0.8rem;"></iconify-icon>
                                    About Us
                                </a>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="courses.html" style="color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                   onmouseover="this.style.color='#ffd700'; this.style.transform='translateX(5px)'" 
                                   onmouseout="this.style.color='rgba(255,255,255,0.8)'; this.style.transform='translateX(0)'">
                                    <iconify-icon icon="material-symbols:arrow-forward" style="font-size: 0.8rem;"></iconify-icon>
                                    Courses
                                </a>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="contact.html" style="color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                   onmouseover="this.style.color='#ffd700'; this.style.transform='translateX(5px)'" 
                                   onmouseout="this.style.color='rgba(255,255,255,0.8)'; this.style.transform='translateX(0)'">
                                    <iconify-icon icon="material-symbols:arrow-forward" style="font-size: 0.8rem;"></iconify-icon>
                                    Contact
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Support -->
                <div class="col-lg-2 col-md-6">
                    <div style="margin-bottom: 30px;">
                        <h5 style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px;">Support</h5>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="margin-bottom: 12px;">
                                <a href="https://wa.me/201027500835" target="_blank" style="color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                   onmouseover="this.style.color='#ffd700'; this.style.transform='translateX(5px)'" 
                                   onmouseout="this.style.color='rgba(255,255,255,0.8)'; this.style.transform='translateX(0)'">
                                    <iconify-icon icon="material-symbols:arrow-forward" style="font-size: 0.8rem;"></iconify-icon>
                                    WhatsApp Support
                                </a>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="#" style="color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px;"
                                   onmouseover="this.style.color='#ffd700'; this.style.transform='translateX(5px)'" 
                                   onmouseout="this.style.color='rgba(255,255,255,0.8)'; this.style.transform='translateX(0)'">
                                    <iconify-icon icon="material-symbols:arrow-forward" style="font-size: 0.8rem;"></iconify-icon>
                                    Help Center
                                </a>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <!-- FAQ removed -->
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Contact Info -->
                <div class="col-lg-4 col-md-6">
                    <div style="margin-bottom: 30px;">
                        <h5 style="font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px;">Contact Info</h5>
                        <div style="display: flex; flex-direction: column; gap: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                                    <iconify-icon icon="mdi:location" style="color: white; font-size: 1.2rem;"></iconify-icon>
                                </div>
                                <div>
                                    <p style="color: rgba(255,255,255,0.9); font-weight: 600; margin: 0; font-size: 0.95rem;">Address</p>
                                    <p style="color: rgba(255,255,255,0.7); margin: 0; font-size: 0.9rem;">New Cairo, Egypt</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                                    <iconify-icon icon="solar:phone-bold" style="color: white; font-size: 1.2rem;"></iconify-icon>
                                </div>
                                <div>
                                    <p style="color: rgba(255,255,255,0.9); font-weight: 600; margin: 0; font-size: 0.95rem;">Phone</p>
                                    <p style="color: rgba(255,255,255,0.7); margin: 0; font-size: 0.9rem;">01027500835</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);">
                                    <iconify-icon icon="ic:baseline-email" style="color: white; font-size: 1.2rem;"></iconify-icon>
                                </div>
                                <div>
                                    <p style="color: rgba(255,255,255,0.9); font-weight: 600; margin: 0; font-size: 0.95rem;">Email</p>
                                    <p style="color: rgba(255,255,255,0.7); margin: 0; font-size: 0.9rem;">info@ignation.com</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer Bottom -->
        <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 50px; padding: 30px 0; background: rgba(0,0,0,0.2);">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <p style="color: rgba(255,255,255,0.7); margin: 0; font-size: 0.9rem;">
                            Â© 2025 IG Nation. All rights reserved. | Designed with â¤ï¸ for better education
                        </p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <p style="color: rgba(255,255,255,0.7); margin: 0; font-size: 0.9rem;">
                            Made with <span style="color: #ffd700;">passion</span> for learning
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 20px; border: none; overflow: hidden;">
                <div class="modal-header" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 30px;">
                    <div>
                        <h5 class="modal-title mb-2" style="font-size: 1.5rem; font-weight: 700;">
                            <iconify-icon icon="material-symbols:login" class="me-2"></iconify-icon>
                            Login to Your Account
                        </h5>
                        <p class="mb-0" style="opacity: 0.9; font-size: 0.9rem;">Welcome back! Please enter your credentials</p>
                    </div>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" style="padding: 40px;">
                    <div id="loginForm">
                        <div class="mb-4">
                            <label for="loginEmail" class="form-label" style="font-weight: 600; color: #333;">
                                <iconify-icon icon="material-symbols:email" class="me-2"></iconify-icon>
                                Email Address
                            </label>
                            <input type="email" id="loginEmail" class="form-control" autocapitalize="off" autocorrect="off" spellcheck="false" required style="text-transform: lowercase; border-radius: 10px; border: 2px solid #e0e0e0; padding: 12px 15px; font-size: 1rem;" oninput="this.value = this.value.toLowerCase()" onkeyup="this.value = this.value.toLowerCase()" onblur="this.value = this.value.toLowerCase()" placeholder="Enter your email address">
                        </div>
                        <div class="mb-4">
                            <label for="loginPassword" class="form-label" style="font-weight: 600; color: #333;">
                                <iconify-icon icon="material-symbols:password" class="me-2"></iconify-icon>
                                Password
                            </label>
                            <div class="input-group">
                                <input type="password" id="loginPassword" class="form-control" required autocomplete="new-password" readonly onfocus="this.removeAttribute('readonly')" oninput="togglePasswordIconVisibility()" style="text-transform: none; border-radius: 10px; border: 2px solid #e0e0e0; padding: 12px 15px; font-size: 1rem;" autocapitalize="off" autocorrect="off" spellcheck="false" placeholder="Enter your password">
                                <button class="btn btn-outline-secondary" type="button" id="loginPasswordToggleBtn" onclick="togglePasswordVisibility('loginPassword', 'loginPasswordToggle')" style="display:none; border-radius: 0 10px 10px 0; border: 2px solid #e0e0e0; border-left: none;">
                                    <iconify-icon id="loginPasswordToggle" icon="material-symbols:visibility-off" style="font-size: 18px; color: #6b7280;"></iconify-icon>
                                </button>
                            </div>
                        </div>
                        <div class="mb-4 text-end">
                            <a href="#" class="text-primary text-decoration-none" onclick="showForgotPassword()" style="font-size: 0.9rem; font-weight: 500;">
                                <iconify-icon icon="material-symbols:help" class="me-1"></iconify-icon>
                                Forgot Password?
                            </a>
                        </div>
                        <button type="button" class="btn btn-primary w-100" onclick="handleLoginClick()" style="border-radius: 12px; padding: 15px; font-weight: 600; font-size: 1.1rem; background: linear-gradient(135deg, #667eea, #764ba2); border: none;">
                            <iconify-icon icon="material-symbols:login" class="me-2"></iconify-icon>
                            Log In
                        </button>
                        
                        <div class="text-center mt-4">
                            <small class="text-muted">
                                <iconify-icon icon="material-symbols:lock" class="me-1"></iconify-icon>
                                Your information is secure and encrypted
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div class="modal fade" id="videoModal" tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content" style="background: transparent; border: none;">
                <div class="modal-header" style="border: none; padding: 0; position: absolute; right: 0; top: -40px; z-index: 1050;">
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" style="font-size: 1.5rem; opacity: 1;"></button>
                </div>
                <div class="modal-body" style="padding: 0;">
                    <div class="ratio ratio-16x9">
                        <iframe id="demoVideo" src="" title="Demo Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Register Now <small class="text-muted">(v2.0)</small></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="registerForm">
                        <!-- USER TYPE SELECTION - FIRST -->
                        <div class="mb-3" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 1.5rem; border-radius: 12px; border: 2px solid #667eea; box-shadow: 0 4px 6px rgba(102, 126, 234, 0.1);">
                            <label for="userType" class="form-label" style="font-weight: 700; color: #667eea; font-size: 1.1rem;">
                                <iconify-icon icon="material-symbols:person" class="me-2"></iconify-icon>
                                I am registering as a: *
                            </label>
                            <select class="form-select form-select-lg" id="userType" required style="border: 2px solid #667eea; font-size: 1.1rem; padding: 0.75rem;">
                                <option value="">Please select your role</option>
                                <option value="student">ðŸŽ“ Student</option>
                                <option value="parent">ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ Parent/Guardian</option>
                                <option value="teacher">ðŸ‘¨â€ðŸ« Teacher</option>
                            </select>
                            <div class="form-text mt-2" style="color: #667eea; font-weight: 500;">
                                <iconify-icon icon="material-symbols:info" class="me-1"></iconify-icon>
                                Choose your role to customize the registration form
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="firstName" class="form-label">First Name *</label>
                                <input type="text" id="firstName" class="form-control" autocapitalize="none" autocorrect="off" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="lastName" class="form-label">Last Name *</label>
                                <input type="text" id="lastName" class="form-control" autocapitalize="none" autocorrect="off" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email Address *</label>
                            <input type="email" id="email" class="form-control" autocapitalize="off" autocorrect="off" spellcheck="false" required style="text-transform: lowercase;" oninput="this.value = this.value.toLowerCase()" onkeyup="this.value = this.value.toLowerCase()" onblur="this.value = this.value.toLowerCase()">
                        </div>
                        <div class="mb-3" id="studentPhoneSection">
                            <label for="phone" class="form-label">Student Phone Number</label>
                            <div class="row">
                                <div class="col-4">
                                    <div class="custom-dropdown">
                                        <div class="dropdown-selected" onclick="toggleDropdown('phoneCountry')">
                                            <span class="flag">ðŸ‡ªðŸ‡¬</span>
                                            <span class="country-text">Egypt (+20)</span>
                                            <span class="dropdown-arrow">â–¼</span>
                                        </div>
                                        <div class="dropdown-options" id="phoneCountryOptions" style="display: none;">
                                            <!-- Middle East Countries -->
                                            <div class="dropdown-option" data-value="EG" onclick="selectCountry('phoneCountry', 'EG', 'ðŸ‡ªðŸ‡¬', 'Egypt (+20)')">
                                                <span class="flag">ðŸ‡ªðŸ‡¬</span> Egypt (+20)
                                            </div>
                                            <div class="dropdown-option" data-value="SA" onclick="selectCountry('phoneCountry', 'SA', 'ðŸ‡¸ðŸ‡¦', 'Saudi Arabia (+966)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡¦</span> Saudi Arabia (+966)
                                            </div>
                                            <div class="dropdown-option" data-value="AE" onclick="selectCountry('phoneCountry', 'AE', 'ðŸ‡¦ðŸ‡ª', 'United Arab Emirates (+971)')">
                                                <span class="flag">ðŸ‡¦ðŸ‡ª</span> United Arab Emirates (+971)
                                            </div>
                                            <div class="dropdown-option" data-value="KW" onclick="selectCountry('phoneCountry', 'KW', 'ðŸ‡°ðŸ‡¼', 'Kuwait (+965)')">
                                                <span class="flag">ðŸ‡°ðŸ‡¼</span> Kuwait (+965)
                                            </div>
                                            <div class="dropdown-option" data-value="QA" onclick="selectCountry('phoneCountry', 'QA', 'ðŸ‡¶ðŸ‡¦', 'Qatar (+974)')">
                                                <span class="flag">ðŸ‡¶ðŸ‡¦</span> Qatar (+974)
                                            </div>
                                            <div class="dropdown-option" data-value="BH" onclick="selectCountry('phoneCountry', 'BH', 'ðŸ‡§ðŸ‡­', 'Bahrain (+973)')">
                                                <span class="flag">ðŸ‡§ðŸ‡­</span> Bahrain (+973)
                                            </div>
                                            <div class="dropdown-option" data-value="OM" onclick="selectCountry('phoneCountry', 'OM', 'ðŸ‡´ðŸ‡²', 'Oman (+968)')">
                                                <span class="flag">ðŸ‡´ðŸ‡²</span> Oman (+968)
                                            </div>
                                            <div class="dropdown-option" data-value="JO" onclick="selectCountry('phoneCountry', 'JO', 'ðŸ‡¯ðŸ‡´', 'Jordan (+962)')">
                                                <span class="flag">ðŸ‡¯ðŸ‡´</span> Jordan (+962)
                                            </div>
                                            <div class="dropdown-option" data-value="LB" onclick="selectCountry('phoneCountry', 'LB', 'ðŸ‡±ðŸ‡§', 'Lebanon (+961)')">
                                                <span class="flag">ðŸ‡±ðŸ‡§</span> Lebanon (+961)
                                            </div>
                                            <div class="dropdown-option" data-value="IQ" onclick="selectCountry('phoneCountry', 'IQ', 'ðŸ‡®ðŸ‡¶', 'Iraq (+964)')">
                                                <span class="flag">ðŸ‡®ðŸ‡¶</span> Iraq (+964)
                                            </div>
                                            <div class="dropdown-option" data-value="SY" onclick="selectCountry('phoneCountry', 'SY', 'ðŸ‡¸ðŸ‡¾', 'Syria (+963)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡¾</span> Syria (+963)
                                            </div>
                                            <div class="dropdown-option" data-value="YE" onclick="selectCountry('phoneCountry', 'YE', 'ðŸ‡¾ðŸ‡ª', 'Yemen (+967)')">
                                                <span class="flag">ðŸ‡¾ðŸ‡ª</span> Yemen (+967)
                                            </div>
                                            <div class="dropdown-option" data-value="PS" onclick="selectCountry('phoneCountry', 'PS', 'ðŸ‡µðŸ‡¸', 'Palestine (+970)')">
                                                <span class="flag">ðŸ‡µðŸ‡¸</span> Palestine (+970)
                                            </div>
                                            
                                            <!-- African Arab Countries -->
                                            <div class="dropdown-option" data-value="TN" onclick="selectCountry('phoneCountry', 'TN', 'ðŸ‡¹ðŸ‡³', 'Tunisia (+216)')">
                                                <span class="flag">ðŸ‡¹ðŸ‡³</span> Tunisia (+216)
                                            </div>
                                            <div class="dropdown-option" data-value="DZ" onclick="selectCountry('phoneCountry', 'DZ', 'ðŸ‡©ðŸ‡¿', 'Algeria (+213)')">
                                                <span class="flag">ðŸ‡©ðŸ‡¿</span> Algeria (+213)
                                            </div>
                                            <div class="dropdown-option" data-value="MA" onclick="selectCountry('phoneCountry', 'MA', 'ðŸ‡²ðŸ‡¦', 'Morocco (+212)')">
                                                <span class="flag">ðŸ‡²ðŸ‡¦</span> Morocco (+212)
                                            </div>
                                            <div class="dropdown-option" data-value="LY" onclick="selectCountry('phoneCountry', 'LY', 'ðŸ‡±ðŸ‡¾', 'Libya (+218)')">
                                                <span class="flag">ðŸ‡±ðŸ‡¾</span> Libya (+218)
                                            </div>
                                            <div class="dropdown-option" data-value="SD" onclick="selectCountry('phoneCountry', 'SD', 'ðŸ‡¸ðŸ‡©', 'Sudan (+249)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡©</span> Sudan (+249)
                                            </div>
                                            <div class="dropdown-option" data-value="SS" onclick="selectCountry('phoneCountry', 'SS', 'ðŸ‡¸ðŸ‡¸', 'South Sudan (+211)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡¸</span> South Sudan (+211)
                                            </div>
                                            <div class="dropdown-option" data-value="DJ" onclick="selectCountry('phoneCountry', 'DJ', 'ðŸ‡©ðŸ‡¯', 'Djibouti (+253)')">
                                                <span class="flag">ðŸ‡©ðŸ‡¯</span> Djibouti (+253)
                                            </div>
                                            <div class="dropdown-option" data-value="SO" onclick="selectCountry('phoneCountry', 'SO', 'ðŸ‡¸ðŸ‡´', 'Somalia (+252)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡´</span> Somalia (+252)
                                            </div>
                                            <div class="dropdown-option" data-value="KM" onclick="selectCountry('phoneCountry', 'KM', 'ðŸ‡°ðŸ‡²', 'Comoros (+269)')">
                                                <span class="flag">ðŸ‡°ðŸ‡²</span> Comoros (+269)
                                            </div>
                                            <div class="dropdown-option" data-value="MR" onclick="selectCountry('phoneCountry', 'MR', 'ðŸ‡²ðŸ‡·', 'Mauritania (+222)')">
                                                <span class="flag">ðŸ‡²ðŸ‡·</span> Mauritania (+222)
                                            </div>
                                        </div>
                                        <input type="hidden" id="phoneCountry" value="EG">
                                    </div>
                                </div>
                                <div class="col-8">
                                    <input type="tel" id="phone" class="form-control" placeholder="01xxxxxxxxx" onblur="validateMiddleEastPhone('phone')">
                                </div>
                            </div>
                            <div id="phoneError" class="text-danger" style="display: none; font-size: 0.875rem; margin-top: 0.25rem;">Not a valid phone number</div>
                        </div>
                        <div class="mb-3" id="parentPhoneSection">
                            <label for="parentPhone" class="form-label" id="parentPhoneLabel">Parent/Guardian Phone Number *</label>
                            <div class="row">
                                <div class="col-4">
                                    <div class="custom-dropdown">
                                        <div class="dropdown-selected" onclick="toggleDropdown('parentPhoneCountry')">
                                            <span class="flag">ðŸ‡ªðŸ‡¬</span>
                                            <span class="country-text">Egypt (+20)</span>
                                            <span class="dropdown-arrow">â–¼</span>
                                        </div>
                                        <div class="dropdown-options" id="parentPhoneCountryOptions" style="display: none;">
                                            <!-- Middle East Countries -->
                                            <div class="dropdown-option" data-value="EG" onclick="selectCountry('parentPhoneCountry', 'EG', 'ðŸ‡ªðŸ‡¬', 'Egypt (+20)')">
                                                <span class="flag">ðŸ‡ªðŸ‡¬</span> Egypt (+20)
                                            </div>
                                            <div class="dropdown-option" data-value="SA" onclick="selectCountry('parentPhoneCountry', 'SA', 'ðŸ‡¸ðŸ‡¦', 'Saudi Arabia (+966)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡¦</span> Saudi Arabia (+966)
                                            </div>
                                            <div class="dropdown-option" data-value="AE" onclick="selectCountry('parentPhoneCountry', 'AE', 'ðŸ‡¦ðŸ‡ª', 'United Arab Emirates (+971)')">
                                                <span class="flag">ðŸ‡¦ðŸ‡ª</span> United Arab Emirates (+971)
                                            </div>
                                            <div class="dropdown-option" data-value="KW" onclick="selectCountry('parentPhoneCountry', 'KW', 'ðŸ‡°ðŸ‡¼', 'Kuwait (+965)')">
                                                <span class="flag">ðŸ‡°ðŸ‡¼</span> Kuwait (+965)
                                            </div>
                                            <div class="dropdown-option" data-value="QA" onclick="selectCountry('parentPhoneCountry', 'QA', 'ðŸ‡¶ðŸ‡¦', 'Qatar (+974)')">
                                                <span class="flag">ðŸ‡¶ðŸ‡¦</span> Qatar (+974)
                                            </div>
                                            <div class="dropdown-option" data-value="BH" onclick="selectCountry('parentPhoneCountry', 'BH', 'ðŸ‡§ðŸ‡­', 'Bahrain (+973)')">
                                                <span class="flag">ðŸ‡§ðŸ‡­</span> Bahrain (+973)
                                            </div>
                                            <div class="dropdown-option" data-value="OM" onclick="selectCountry('parentPhoneCountry', 'OM', 'ðŸ‡´ðŸ‡²', 'Oman (+968)')">
                                                <span class="flag">ðŸ‡´ðŸ‡²</span> Oman (+968)
                                            </div>
                                            <div class="dropdown-option" data-value="JO" onclick="selectCountry('parentPhoneCountry', 'JO', 'ðŸ‡¯ðŸ‡´', 'Jordan (+962)')">
                                                <span class="flag">ðŸ‡¯ðŸ‡´</span> Jordan (+962)
                                            </div>
                                            <div class="dropdown-option" data-value="LB" onclick="selectCountry('parentPhoneCountry', 'LB', 'ðŸ‡±ðŸ‡§', 'Lebanon (+961)')">
                                                <span class="flag">ðŸ‡±ðŸ‡§</span> Lebanon (+961)
                                            </div>
                                            <div class="dropdown-option" data-value="IQ" onclick="selectCountry('parentPhoneCountry', 'IQ', 'ðŸ‡®ðŸ‡¶', 'Iraq (+964)')">
                                                <span class="flag">ðŸ‡®ðŸ‡¶</span> Iraq (+964)
                                            </div>
                                            <div class="dropdown-option" data-value="SY" onclick="selectCountry('parentPhoneCountry', 'SY', 'ðŸ‡¸ðŸ‡¾', 'Syria (+963)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡¾</span> Syria (+963)
                                            </div>
                                            <div class="dropdown-option" data-value="YE" onclick="selectCountry('parentPhoneCountry', 'YE', 'ðŸ‡¾ðŸ‡ª', 'Yemen (+967)')">
                                                <span class="flag">ðŸ‡¾ðŸ‡ª</span> Yemen (+967)
                                            </div>
                                            <div class="dropdown-option" data-value="PS" onclick="selectCountry('parentPhoneCountry', 'PS', 'ðŸ‡µðŸ‡¸', 'Palestine (+970)')">
                                                <span class="flag">ðŸ‡µðŸ‡¸</span> Palestine (+970)
                                            </div>
                                            
                                            <!-- African Arab Countries -->
                                            <div class="dropdown-option" data-value="TN" onclick="selectCountry('parentPhoneCountry', 'TN', 'ðŸ‡¹ðŸ‡³', 'Tunisia (+216)')">
                                                <span class="flag">ðŸ‡¹ðŸ‡³</span> Tunisia (+216)
                                            </div>
                                            <div class="dropdown-option" data-value="DZ" onclick="selectCountry('parentPhoneCountry', 'DZ', 'ðŸ‡©ðŸ‡¿', 'Algeria (+213)')">
                                                <span class="flag">ðŸ‡©ðŸ‡¿</span> Algeria (+213)
                                            </div>
                                            <div class="dropdown-option" data-value="MA" onclick="selectCountry('parentPhoneCountry', 'MA', 'ðŸ‡²ðŸ‡¦', 'Morocco (+212)')">
                                                <span class="flag">ðŸ‡²ðŸ‡¦</span> Morocco (+212)
                                            </div>
                                            <div class="dropdown-option" data-value="LY" onclick="selectCountry('parentPhoneCountry', 'LY', 'ðŸ‡±ðŸ‡¾', 'Libya (+218)')">
                                                <span class="flag">ðŸ‡±ðŸ‡¾</span> Libya (+218)
                                            </div>
                                            <div class="dropdown-option" data-value="SD" onclick="selectCountry('parentPhoneCountry', 'SD', 'ðŸ‡¸ðŸ‡©', 'Sudan (+249)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡©</span> Sudan (+249)
                                            </div>
                                            <div class="dropdown-option" data-value="SS" onclick="selectCountry('parentPhoneCountry', 'SS', 'ðŸ‡¸ðŸ‡¸', 'South Sudan (+211)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡¸</span> South Sudan (+211)
                                            </div>
                                            <div class="dropdown-option" data-value="DJ" onclick="selectCountry('parentPhoneCountry', 'DJ', 'ðŸ‡©ðŸ‡¯', 'Djibouti (+253)')">
                                                <span class="flag">ðŸ‡©ðŸ‡¯</span> Djibouti (+253)
                                            </div>
                                            <div class="dropdown-option" data-value="SO" onclick="selectCountry('parentPhoneCountry', 'SO', 'ðŸ‡¸ðŸ‡´', 'Somalia (+252)')">
                                                <span class="flag">ðŸ‡¸ðŸ‡´</span> Somalia (+252)
                                            </div>
                                            <div class="dropdown-option" data-value="KM" onclick="selectCountry('parentPhoneCountry', 'KM', 'ðŸ‡°ðŸ‡²', 'Comoros (+269)')">
                                                <span class="flag">ðŸ‡°ðŸ‡²</span> Comoros (+269)
                                            </div>
                                            <div class="dropdown-option" data-value="MR" onclick="selectCountry('parentPhoneCountry', 'MR', 'ðŸ‡²ðŸ‡·', 'Mauritania (+222)')">
                                                <span class="flag">ðŸ‡²ðŸ‡·</span> Mauritania (+222)
                                            </div>
                                        </div>
                                        <input type="hidden" id="parentPhoneCountry" value="EG">
                                    </div>
                                </div>
                                <div class="col-8">
                                    <input type="tel" id="parentPhone" class="form-control" required placeholder="01xxxxxxxxx" onblur="validateMiddleEastPhone('parentPhone')">
                                </div>
                            </div>
                            <div class="form-text" id="parentPhoneText">Required for student registration and communication</div>
                            <div id="parentPhoneError" class="text-danger" style="display: none; font-size: 0.875rem; margin-top: 0.25rem;">Not a valid phone number</div>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password *</label>
                            <div class="input-group">
                                <input type="password" id="password" class="form-control" required minlength="6" style="text-transform: none;" autocapitalize="off" autocorrect="off" spellcheck="false" oninput="togglePasswordIconVisibility('password')">
                                <button class="btn btn-outline-secondary" type="button" id="passwordToggleBtn" onclick="togglePasswordVisibility('password', 'passwordToggle')" style="display:none;">
                                    <iconify-icon id="passwordToggle" icon="heroicons:eye-slash-20-solid" style="font-size: 18px; color: #6b7280;"></iconify-icon>
                                </button>
                            </div>
                            <div class="form-text">Password must be at least 6 characters long</div>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Confirm Password *</label>
                            <div class="input-group">
                                <input type="password" id="confirmPassword" class="form-control" required style="text-transform: none;" autocapitalize="off" autocorrect="off" spellcheck="false" oninput="togglePasswordIconVisibility('confirmPassword')">
                                <button class="btn btn-outline-secondary" type="button" id="confirmPasswordToggleBtn" onclick="togglePasswordVisibility('confirmPassword', 'confirmPasswordToggle')" style="display:none;">
                                    <iconify-icon id="confirmPasswordToggle" icon="heroicons:eye-slash-20-solid" style="font-size: 18px; color: #6b7280;"></iconify-icon>
                                </button>
                            </div>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="agreeTerms" required>
                            <label class="form-check-label" for="agreeTerms">
                                I agree to the <a href="#" class="text-primary">Terms and Conditions</a> and <a href="#" class="text-primary">Privacy Policy</a>
                            </label>
                        </div>
                        <button type="button" class="btn btn-primary w-100" onclick="handleRegisterClick()">
                            <iconify-icon icon="material-symbols:person-add" class="me-2"></iconify-icon>
                            Register Now
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal fade" id="forgotPasswordModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Reset Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Step 1: Enter Email -->
                    <div id="forgotPasswordStep1">
                        <p class="text-muted mb-4">Enter your email address and we'll send you a verification code to reset your password.</p>
                        <div class="mb-3">
                            <label for="forgotEmail" class="form-label">Email Address</label>
                            <input type="email" id="forgotEmail" class="form-control" required>
                        </div>
                        <button type="button" class="btn btn-primary w-100 mb-2" onclick="sendVerificationCode()">
                            <iconify-icon icon="material-symbols:send" class="me-2"></iconify-icon>
                            Send Verification Code
                        </button>
                        <div class="text-center">
                            <p class="text-muted mb-0">Don't have an account?</p>
                            <a href="#" class="text-primary" onclick="switchToRegister()">Register Now</a>
                        </div>
                    </div>

                    <!-- Step 2: Enter Verification Code -->
                    <div id="forgotPasswordStep2" style="display: none;">
                        <p class="text-muted mb-4">We've sent a 6-digit verification code to <strong id="verificationEmail"></strong>. Please enter it below.</p>
                        <div class="mb-3">
                            <label for="verificationCode" class="form-label">Verification Code</label>
                            <input type="text" id="verificationCode" class="form-control text-center" maxlength="6" required>
                        </div>
                        <div class="mb-3 text-center">
                            <a href="#" class="text-primary" onclick="resendVerificationCode()">Resend Code</a>
                        </div>
                        <button type="button" class="btn btn-primary w-100" onclick="verifyCode()">
                            <iconify-icon icon="material-symbols:verified" class="me-2"></iconify-icon>
                            Verify Code
                        </button>
                    </div>

                    <!-- Step 3: Enter New Password -->
                    <div id="forgotPasswordStep3" style="display: none;">
                        <p class="text-muted mb-4">Enter your new password below.</p>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">New Password</label>
                            <div class="input-group">
                                <input type="password" id="newPassword" class="form-control" required minlength="6" style="text-transform: none;" autocapitalize="off" autocorrect="off" spellcheck="false" oninput="togglePasswordIconVisibility('newPassword')">
                                <button class="btn btn-outline-secondary" type="button" id="newPasswordToggleBtn" onclick="togglePasswordVisibility('newPassword', 'newPasswordToggle')" style="display:none;">
                                    <iconify-icon id="newPasswordToggle" icon="heroicons:eye-slash-20-solid" style="font-size: 18px; color: #6b7280;"></iconify-icon>
                                </button>
                            </div>
                            <div class="form-text">Password must be at least 6 characters long</div>
                        </div>
                        <div class="mb-3">
                            <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                            <div class="input-group">
                                <input type="password" id="confirmNewPassword" class="form-control" required style="text-transform: none;" autocapitalize="off" autocorrect="off" spellcheck="false" oninput="togglePasswordIconVisibility('confirmNewPassword')">
                                <button class="btn btn-outline-secondary" type="button" id="confirmNewPasswordToggleBtn" onclick="togglePasswordVisibility('confirmNewPassword', 'confirmNewPasswordToggle')" style="display:none;">
                                    <iconify-icon id="confirmNewPasswordToggle" icon="heroicons:eye-slash-20-solid" style="font-size: 18px; color: #6b7280;"></iconify-icon>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-success w-100" onclick="resetPassword()">
                            <iconify-icon icon="material-symbols:lock-reset" class="me-2"></iconify-icon>
                            Reset Password
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <iconify-icon icon="material-symbols:shopping-cart" class="me-2 text-primary"></iconify-icon>
                        Your Cart <span class="badge bg-primary ms-2" id="cartModalCount">0</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cartList">
                        <div class="text-center text-muted py-4">
                            <iconify-icon icon="material-symbols:shopping-cart-outline" class="fs-1 mb-3"></iconify-icon>
                            <p>Your cart is empty. Start adding courses to your cart!</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-danger" onclick="resetCart()">Reset Cart</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continue Shopping</button>
                    <button type="button" class="btn btn-primary" id="checkoutBtn" disabled onclick="proceedToCheckout()">Proceed to Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Favorites Modal -->
    <div class="modal fade" id="favoritesModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <iconify-icon icon="material-symbols:favorite" class="me-2 text-danger"></iconify-icon>
                        Your Favorites
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="favoritesList">
                        <div class="text-center text-muted py-4">
                            <iconify-icon icon="material-symbols:favorite-outline" class="fs-1 mb-3"></iconify-icon>
                            <p>No favorite courses yet. Start adding courses to your favorites!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/config.js?v=20240211-0805"></script>
    <script>
        // FORCE PRODUCTION CONFIG - Override everything
        window.API_CONFIG = {
            baseURL: 'https://my-project-gphv.onrender.com',
            apiURL: 'https://my-project-gphv.onrender.com/api',
            healthURL: 'https://my-project-gphv.onrender.com/health',
            environment: 'production'
        };
        console.log('ðŸš€ FORCED PRODUCTION MODE');
        console.log('ðŸ”— Backend URL: https://my-project-gphv.onrender.com');
        
        // IMMEDIATE FUNCTION DEFINITIONS - Define all functions before any HTML can call them
        console.log('ðŸš€ FORCE LOADING - DEFINING ALL FUNCTIONS IMMEDIATELY');
        
        // Check login state function
        function checkLoginState() {
            const token = localStorage.getItem('authToken');
            const user = JSON.parse(localStorage.getItem('currentUser') || 'null');
            return { isLoggedIn: !!token, user };
        }

        // Toast notification function
        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            if (!toastContainer) return;
            
            const toastId = 'toast-' + Date.now();
            
            let icon = 'material-symbols:info';
            let title = 'Notification';
            let bgClass = 'bg-primary';
            
            if (type === 'warning') {
                icon = 'material-symbols:warning';
                title = 'Warning!';
                bgClass = 'bg-warning';
            } else if (type === 'success') {
                icon = 'material-symbols:check-circle';
                title = 'Success!';
                bgClass = 'bg-success';
            } else if (type === 'error') {
                icon = 'material-symbols:error';
                title = 'Error!';
                bgClass = 'bg-danger';
            }
            
            const toastHTML = `
                <div class="toast" id="${toastId}" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header ${bgClass} text-white">
                        <iconify-icon icon="${icon}" class="me-2"></iconify-icon>
                        <strong class="me-auto">${title}</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                    </div>
                </div>
            `;
            
            toastContainer.insertAdjacentHTML('beforeend', toastHTML);
            
            const toastElement = document.getElementById(toastId);
            if (toastElement && window.bootstrap) {
                const toast = new bootstrap.Toast(toastElement, {
                    autohide: true,
                    delay: 3000
                });
                toast.show();
                
                toastElement.addEventListener('hidden.bs.toast', function() {
                    toastElement.remove();
                });
            }
        }

        // Phone validation
        function validateMiddleEastPhone(fieldId) {
            const phoneInput = document.getElementById(fieldId);
            const phoneError = document.getElementById('phoneError');
            const phone = phoneInput ? phoneInput.value.trim() : '';
            
            // Egyptian phone validation (01xxxxxxxxx)
            const egyptPhoneRegex = /^01[0-2]\d{8}$/;
            
            if (phone && !egyptPhoneRegex.test(phone)) {
                if (phoneError) phoneError.style.display = 'block';
                if (phoneInput) phoneInput.classList.add('is-invalid');
                return false;
            } else {
                if (phoneError) phoneError.style.display = 'none';
                if (phoneInput) phoneInput.classList.remove('is-invalid');
                return true;
            }
        }

        // Password visibility toggle
        function togglePasswordIconVisibility(fieldId, toggleBtnId) {
            const passwordInput = document.getElementById(fieldId);
            const toggleBtn = document.getElementById(toggleBtnId);
            
            if (passwordInput && toggleBtn) {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggleBtn.innerHTML = `<iconify-icon icon="material-symbols:visibility-off" style="font-size: 18px; color: #6b7280;"></iconify-icon>`;
                } else {
                    passwordInput.type = 'password';
                    toggleBtn.innerHTML = `<iconify-icon icon="material-symbols:visibility" style="font-size: 18px; color: #6b7280;"></iconify-icon>`;
                }
            }
        }

        // Login function
        function handleLoginClick() {
            console.log('ðŸ”‘ LOGIN CLICKED - Function exists!');
            
            const email = document.getElementById('loginEmail')?.value || '';
            const password = document.getElementById('loginPassword')?.value || '';

            if (!email || !password) {
                showToast('Please fill in all fields', 'warning');
                return;
            }

            // Mock login for Netlify
            if (!window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1')) {
                console.log('ðŸ§ª Mock login for:', email);
                
                // Store mock user data
                const mockUser = {
                    id: Date.now(),
                    email: email,
                    first_name: 'Test',
                    last_name: 'User'
                };
                
                const token = 'mock_token_' + Date.now();
                
                localStorage.setItem('authToken', token);
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', `${mockUser.first_name} ${mockUser.last_name}`);
                localStorage.setItem('userEmail', mockUser.email);
                localStorage.setItem('userId', mockUser.id);
                
                showToast('Login successful!', 'success');
                
                // Close modal
                const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                if (loginModal) {
                    loginModal.hide();
                }
                
                // Update UI
                if (typeof checkLoginState === 'function') {
                    checkLoginState();
                }
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = 'homenocourses.html';
                }, 1000);
                
                return;
            }

            // Real API call for localhost
            if (window.api && window.api.login) {
                window.api.login({ email, password })
                    .then(data => {
                        showToast('Login successful!', 'success');
                        
                        // Close modal
                        const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                        if (loginModal) {
                            loginModal.hide();
                        }
                        
                        // Update UI
                        if (typeof checkLoginState === 'function') {
                            checkLoginState();
                        }
                        
                        // Redirect to dashboard
                        setTimeout(() => {
                            window.location.href = 'homenocourses.html';
                        }, 1000);
                    })
                    .catch(error => {
                        console.error('Login error:', error);
                        showToast('Login failed. Please check your credentials.', 'error');
                    });
            } else {
                // Fallback mock login
                console.log('ðŸ§ª Fallback mock login for:', email);
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', 'Test User');
                localStorage.setItem('userEmail', email);
                showToast('Login successful!', 'success');
                
                setTimeout(() => {
                    window.location.href = 'homenocourses.html';
                }, 1000);
            }
        }

        // Registration function
        function handleRegisterClick() {
            console.log('ðŸ“ REGISTRATION CLICKED - Function exists!');
            
            const firstName = document.getElementById('firstName')?.value || '';
            const lastName = document.getElementById('lastName')?.value || '';
            const email = document.getElementById('email')?.value || '';
            const password = document.getElementById('password')?.value || '';
            const phone = document.getElementById('phone')?.value || '';

            if (!firstName || !lastName || !email || !password) {
                showToast('Please fill in all required fields', 'warning');
                return;
            }

            // Mock registration for Netlify
            if (!window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1')) {
                console.log('ðŸ§ª Mock registration for:', {firstName, lastName, email});
                
                const mockUser = {
                    id: Date.now(),
                    first_name: firstName,
                    last_name: lastName,
                    email: email,
                    phone: phone || ''
                };
                
                const token = 'mock_token_' + Date.now();
                
                localStorage.setItem('authToken', token);
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', `${mockUser.first_name} ${mockUser.last_name}`);
                localStorage.setItem('userEmail', mockUser.email);
                localStorage.setItem('userId', mockUser.id);
                
                showToast('Registration successful!', 'success');
                
                // Close modal
                const registerModal = bootstrap.Modal.getInstance(document.getElementById('registerModal'));
                if (registerModal) {
                    registerModal.hide();
                }
                
                // Update UI
                if (typeof checkLoginState === 'function') {
                    checkLoginState();
                }
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = 'homenocourses.html';
                }, 1000);
                
                return;
            }

            // Real API call for localhost
            if (window.api && window.api.register) {
                window.api.register({ 
                    first_name: firstName, 
                    last_name: lastName, 
                    email, 
                    password, 
                    phone 
                }).then(data => {
                    showToast('Registration successful!', 'success');
                    
                    // Close modal
                    const registerModal = bootstrap.Modal.getInstance(document.getElementById('registerModal'));
                    if (registerModal) {
                        registerModal.hide();
                    }
                    
                    // Update UI
                    if (typeof checkLoginState === 'function') {
                        checkLoginState();
                    }
                    
                    // Redirect to dashboard
                    setTimeout(() => {
                        window.location.href = 'homenocourses.html';
                    }, 1000);
                }).catch(error => {
                    console.error('Registration error:', error);
                    showToast('Registration failed. Please try again.', 'error');
                });
            } else {
                // Fallback mock registration
                console.log('ðŸ§ª Fallback mock registration');
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', `${firstName} ${lastName}`);
                localStorage.setItem('userEmail', email);
                showToast('Registration successful!', 'success');
                
                setTimeout(() => {
                    window.location.href = 'homenocourses.html';
                }, 1000);
            }
        }

        // Make functions globally available immediately
        window.handleLoginClick = handleLoginClick;
        window.handleRegisterClick = handleRegisterClick;
        window.validateMiddleEastPhone = validateMiddleEastPhone;
        window.togglePasswordIconVisibility = togglePasswordIconVisibility;
        window.showToast = showToast;
        
        // Enroll in course function
        function enrollInCourse(courseId) {
            console.log('ðŸŽ“ Enroll Now clicked for:', courseId);
            console.log('ðŸ” Checking login status...');
            
            const isLoggedIn = localStorage.getItem('userLoggedIn');
            
            if (isLoggedIn) {
                // User is logged in, proceed to checkout
                console.log('âœ… User is logged in, proceeding to checkout...');
                
                // Add course to cart and show checkout
                if (window.cart && window.cart.addToCart) {
                    window.cart.addToCart(courseId);
                    
                    // Show checkout modal
                    setTimeout(() => {
                        const checkoutModal = document.getElementById('checkoutModal');
                        if (checkoutModal) {
                            const modal = new bootstrap.Modal(checkoutModal);
                            modal.show();
                        }
                    }, 500);
                } else {
                    // Fallback cart functionality
                    console.log('ðŸ›’ Adding to cart with fallback...');
                    showToast('Course added to cart! Redirecting to checkout...', 'success');
                    
                    setTimeout(() => {
                        window.location.href = '#checkout';
                    }, 1000);
                }
            } else {
                // User is not logged in, show login modal
                console.log('âŒ User not logged in, showing login modal...');
                
                // Store pending action for after login
                localStorage.setItem('pendingAction', JSON.stringify({
                    action: 'enrollInCourse',
                    courseId: courseId,
                    timestamp: Date.now()
                }));
                
                // Show login modal
                const loginModal = document.getElementById('loginModal');
                if (loginModal) {
                    const modal = new bootstrap.Modal(loginModal);
                    modal.show();
                    showToast('Please login to enroll in this course', 'info');
                } else {
                    // Fallback: redirect to login page
                    showToast('Please login to enroll in this course', 'info');
                    setTimeout(() => {
                        window.location.href = '#login';
                    }, 1000);
                }
            }
        }
        
        // Make enrollInCourse globally available
        window.enrollInCourse = enrollInCourse;

        console.log('âœ… ALL FUNCTIONS DEFINED IMMEDIATELY - READY FOR USE');
        console.log('ðŸ”„ AGGRESSIVE CACHE BUST - Version: ' + Date.now() + ' - FORCE UPDATE NOW');

        // When served from localhost, use local API to avoid CORS and match the running backend
        (function() {
            var o = window.location.origin || '';
            if (o.indexOf('localhost') !== -1 || o.indexOf('127.0.0.1') !== -1) {
                window.API_CONFIG = { baseURL: o, apiURL: o + '/api', environment: 'development' };
            }
        })();
    </script>
    <script src="js/api.js"></script>
    <script src="js/cart.js"></script>
    
    <!-- Scroll Animation Script -->
    <script>
        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animated');
                }
            });
        }, observerOptions);

        // Observe all elements with animation classes
        document.addEventListener('DOMContentLoaded', () => {
            const animatedElements = document.querySelectorAll('.animate-on-scroll, .animate-on-scroll-left, .animate-on-scroll-right, .animate-on-scroll-scale');
            animatedElements.forEach(el => observer.observe(el));

            // Parallax effect for background elements
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const parallaxElements = document.querySelectorAll('.parallax-element');
                
                parallaxElements.forEach(element => {
                    const speed = element.dataset.speed || 0.5;
                    const yPos = -(scrolled * speed);
                    element.style.transform = `translateY(${yPos}px)`;
                });
            });

            // Smooth scroll for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    // Skip empty anchors (#)
                    if (href === '#') {
                        return;
                    }
                    
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Add stagger animation to course cards
            const courseCards = document.querySelectorAll('.course-card, .unified-card');
            courseCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('animate-on-scroll-scale');
                observer.observe(card);
            });
        });

        // Enhanced hover effects
        document.addEventListener('DOMContentLoaded', () => {
            // Add ripple effect to buttons
            const buttons = document.querySelectorAll('.unified-button');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.classList.add('ripple');
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
        });
    </script>
    
    <style>
        /* Ripple effect for buttons */
        .unified-button {
            position: relative;
            overflow: hidden;
        }
        
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }
        
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Hide browser default password eye icons */
        input[type="password"]::-webkit-credentials-auto-fill-button,
        input[type="password"]::-webkit-caps-lock-indicator {
            display: none !important;
        }
        
        input[type="password"]::-ms-reveal,
        input[type="password"]::-ms-clear {
            display: none !important;
        }
        
        /* Ensure only our custom eye icon shows */
        .input-group .form-control {
            padding-right: 45px !important;
        }
        
        .input-group .btn {
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            border: none;
            background: transparent;
            z-index: 10;
        }
        
        .input-group .btn:hover,
        .input-group .btn:focus {
            background: transparent;
            border: none;
            box-shadow: none;
        }
        
        /* Country dropdown styling */
        .form-control option {
            font-size: 14px;
            padding: 8px;
            font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', sans-serif;
        }
        
        .form-control {
            font-size: 14px;
            font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', sans-serif;
        }
        
        /* Ensure emoji flags display properly */
        select.form-control option {
            font-size: 16px;
            line-height: 1.5;
            padding: 10px 8px;
            background: white;
            color: #333;
        }
        
        /* Make flags more prominent */
        select.form-control {
            font-size: 16px;
            min-height: 45px;
        }
        
        /* Ensure dropdown shows flags properly */
        select.form-control:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        
        /* Force emoji display */
        .form-control option {
            font-family: "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", "Android Emoji", "EmojiSymbols", "Segoe UI Symbol", sans-serif !important;
            font-size: 18px !important;
        }
        
        /* Debug flag display */
        .flag-debug {
            font-family: "Segoe UI Emoji", "Apple Color Emoji", "Noto Color Emoji", "Android Emoji", "EmojiSymbols", "Segoe UI Symbol", sans-serif !important;
            font-size: 16px !important;
        }
        
        /* Custom Dropdown Styling */
        .custom-dropdown {
            position: relative;
            width: 100%;
        }
        
        .dropdown-selected {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            min-height: 45px;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .dropdown-selected:hover {
            border-color: #80bdff;
        }
        
        .dropdown-selected:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        
        .dropdown-selected .flag {
            font-size: 18px;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .dropdown-selected .country-text {
            flex: 1;
            color: #333;
        }
        
        .dropdown-selected .dropdown-arrow {
            font-size: 12px;
            color: #6c757d;
            margin-left: 8px;
            transition: transform 0.2s ease;
        }
        
        .dropdown-selected.active .dropdown-arrow {
            transform: rotate(180deg);
        }
        
        .dropdown-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ced4da;
            border-top: none;
            border-radius: 0 0 4px 4px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .dropdown-option {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            cursor: pointer;
            font-size: 14px;
            border-bottom: 1px solid #f8f9fa;
            transition: background-color 0.15s ease;
        }
        
        .dropdown-option:hover {
            background-color: #f8f9fa;
        }
        
        .dropdown-option:last-child {
            border-bottom: none;
        }
        
        .dropdown-option .flag {
            font-size: 16px;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        /* Eye icon hover effect */
        .input-group .btn:hover iconify-icon {
            color: #374151 !important;
            transform: scale(1.1);
        }
        
        .input-group .btn {
            transition: all 0.2s ease;
        }
    </style>
    
    <script>
        // Global variables - cart and favorites are now managed by cart.js
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Middle East Phone Number Validation
        const phoneValidationRules = {
            'EG': {
                name: 'Egypt',
                code: '+20',
                patterns: [
                    /^01[0-9]{9}$/, // Mobile: 01xxxxxxxxx (11 digits)
                    /^0[2-8][0-9]{7,8}$/, // Landline: 0xx xxxxxxx (9-10 digits)
                    /^\+201[0-9]{9}$/, // International mobile
                    /^\+20[2-8][0-9]{7,8}$/ // International landline
                ],
                placeholder: '01xxxxxxxxx',
                description: 'Mobile: 11 digits, Landline: 9-10 digits'
            },
            'SA': {
                name: 'Saudi Arabia',
                code: '+966',
                patterns: [
                    /^5[0-9]{8}$/, // Mobile: 5xxxxxxxx (9 digits)
                    /^1[1-9][0-9]{7}$/, // Landline: 1x xxxxxxx (9 digits)
                    /^\+9665[0-9]{8}$/, // International mobile
                    /^\+9661[1-9][0-9]{7}$/ // International landline
                ],
                placeholder: '5xxxxxxxx',
                description: 'Mobile: 9 digits (5xxxxxxxx), Landline: 9 digits (1x xxxxxxx)'
            },
            'AE': {
                name: 'UAE',
                code: '+971',
                patterns: [
                    /^5[0-9]{8}$/, // Mobile: 5xxxxxxxx (9 digits)
                    /^[2-7][0-9]{7}$/, // Landline: x xxxxxxx (8 digits)
                    /^\+9715[0-9]{8}$/, // International mobile
                    /^\+971[2-7][0-9]{7}$/ // International landline
                ],
                placeholder: '5xxxxxxxx',
                description: 'Mobile: 9 digits (5xxxxxxxx), Landline: 8 digits (x xxxxxxx)'
            },
            'KW': {
                name: 'Kuwait',
                code: '+965',
                patterns: [
                    /^[569][0-9]{7}$/, // Mobile: 5/6/9xxxxxxxx (8 digits)
                    /^2[0-9]{7}$/, // Landline: 2xxxxxxx (8 digits)
                    /^\+965[569][0-9]{7}$/, // International mobile
                    /^\+9652[0-9]{7}$/ // International landline
                ],
                placeholder: '5xxxxxxxx',
                description: 'Mobile: 8 digits (5/6/9xxxxxxxx), Landline: 8 digits (2xxxxxxx)'
            },
            'QA': {
                name: 'Qatar',
                code: '+974',
                patterns: [
                    /^[3-7][0-9]{7}$/, // Mobile: 3-7xxxxxxxx (8 digits)
                    /^4[0-9]{7}$/, // Landline: 4xxxxxxx (8 digits)
                    /^\+974[3-7][0-9]{7}$/, // International mobile
                    /^\+9744[0-9]{7}$/ // International landline
                ],
                placeholder: '3xxxxxxxx',
                description: 'Mobile: 8 digits (3-7xxxxxxxx), Landline: 8 digits (4xxxxxxx)'
            },
            'BH': {
                name: 'Bahrain',
                code: '+973',
                patterns: [
                    /^[3-9][0-9]{7}$/, // Mobile: 3-9xxxxxxxx (8 digits)
                    /^1[0-9]{7}$/, // Landline: 1xxxxxxx (8 digits)
                    /^\+973[3-9][0-9]{7}$/, // International mobile
                    /^\+9731[0-9]{7}$/ // International landline
                ],
                placeholder: '3xxxxxxxx',
                description: 'Mobile: 8 digits (3-9xxxxxxxx), Landline: 8 digits (1xxxxxxx)'
            },
            'OM': {
                name: 'Oman',
                code: '+968',
                patterns: [
                    /^[79][0-9]{7}$/, // Mobile: 7/9xxxxxxxx (8 digits)
                    /^2[0-9]{7}$/, // Landline: 2xxxxxxx (8 digits)
                    /^\+968[79][0-9]{7}$/, // International mobile
                    /^\+9682[0-9]{7}$/ // International landline
                ],
                placeholder: '7xxxxxxxx',
                description: 'Mobile: 8 digits (7/9xxxxxxxx), Landline: 8 digits (2xxxxxxx)'
            },
            'JO': {
                name: 'Jordan',
                code: '+962',
                patterns: [
                    /^7[7-9][0-9]{7}$/, // Mobile: 77/78/79xxxxxxxx (9 digits)
                    /^[2-6][0-9]{7}$/, // Landline: 2-6xxxxxxxx (8 digits)
                    /^\+9627[7-9][0-9]{7}$/, // International mobile
                    /^\+962[2-6][0-9]{7}$/ // International landline
                ],
                placeholder: '77xxxxxxxx',
                description: 'Mobile: 9 digits (77/78/79xxxxxxxx), Landline: 8 digits (2-6xxxxxxxx)'
            },
            'LB': {
                name: 'Lebanon',
                code: '+961',
                patterns: [
                    /^[37][0-9]{7}$/, // Mobile: 3/7xxxxxxxx (8 digits)
                    /^[1-9][0-9]{6}$/, // Landline: xxxxxxx (7 digits)
                    /^\+961[37][0-9]{7}$/, // International mobile
                    /^\+961[1-9][0-9]{6}$/ // International landline
                ],
                placeholder: '3xxxxxxxx',
                description: 'Mobile: 8 digits (3/7xxxxxxxx), Landline: 7 digits (xxxxxxx)'
            },
            'IQ': {
                name: 'Iraq',
                code: '+964',
                patterns: [
                    /^7[0-9]{9}$/, // Mobile: 7xxxxxxxxx (10 digits)
                    /^[1-6][0-9]{7}$/, // Landline: xxxxxxxx (8 digits)
                    /^\+9647[0-9]{9}$/, // International mobile
                    /^\+964[1-6][0-9]{7}$/ // International landline
                ],
                placeholder: '7xxxxxxxxx',
                description: 'Mobile: 10 digits (7xxxxxxxxx), Landline: 8 digits (xxxxxxxx)'
            },
            'SY': {
                name: 'Syria',
                code: '+963',
                patterns: [
                    /^9[0-9]{8}$/, // Mobile: 9xxxxxxxx (9 digits)
                    /^1[1-9][0-9]{6}$/, // Landline: 1x xxxxxx (8 digits)
                    /^\+9639[0-9]{8}$/, // International mobile
                    /^\+9631[1-9][0-9]{6}$/ // International landline
                ],
                placeholder: '9xxxxxxxx',
                description: 'Mobile: 9 digits (9xxxxxxxx), Landline: 8 digits (1x xxxxxx)'
            },
            'YE': {
                name: 'Yemen',
                code: '+967',
                patterns: [
                    /^7[0-9]{8}$/, // Mobile: 7xxxxxxxx (9 digits)
                    /^[1-5][0-9]{7}$/, // Landline: xxxxxxxx (8 digits)
                    /^\+9677[0-9]{8}$/, // International mobile
                    /^\+967[1-5][0-9]{7}$/ // International landline
                ],
                placeholder: '7xxxxxxxx',
                description: 'Mobile: 9 digits (7xxxxxxxx), Landline: 8 digits (xxxxxxxx)'
            },
            'PS': {
                name: 'Palestine',
                code: '+970',
                patterns: [
                    /^5[0-9]{8}$/, // Mobile: 5xxxxxxxx (9 digits)
                    /^[2-4][0-9]{7}$/, // Landline: xxxxxxxx (8 digits)
                    /^\+9705[0-9]{8}$/, // International mobile
                    /^\+970[2-4][0-9]{7}$/ // International landline
                ],
                placeholder: '5xxxxxxxx',
                description: 'Mobile: 9 digits (5xxxxxxxx), Landline: 8 digits (xxxxxxxx)'
            },
            
            // African Arab Countries
            'TN': {
                name: 'Tunisia',
                code: '+216',
                patterns: [
                    /^[2-5][0-9]{7}$/, // Mobile: 2-5xxxxxxxx (8 digits)
                    /^7[0-9]{7}$/, // Landline: 7xxxxxxxx (8 digits)
                    /^\+216[2-5][0-9]{7}$/, // International mobile
                    /^\+2167[0-9]{7}$/ // International landline
                ],
                placeholder: '2xxxxxxxx or 4xxxxxxxx or 5xxxxxxxx',
                description: 'Mobile: 8 digits (2-5xxxxxxxx), Landline: 8 digits (7xxxxxxxx)'
            },
            'DZ': {
                name: 'Algeria',
                code: '+213',
                patterns: [
                    /^[5-7][0-9]{8}$/, // Mobile: 5-7xxxxxxxxx (9 digits)
                    /^[2-4][0-9]{7}$/, // Landline: 2-4xxxxxxxx (8 digits)
                    /^\+213[5-7][0-9]{8}$/, // International mobile
                    /^\+213[2-4][0-9]{7}$/ // International landline
                ],
                placeholder: '5xxxxxxxxx or 6xxxxxxxxx or 7xxxxxxxxx',
                description: 'Mobile: 9 digits (5-7xxxxxxxxx), Landline: 8 digits (2-4xxxxxxxx)'
            },
            'MA': {
                name: 'Morocco',
                code: '+212',
                patterns: [
                    /^[67][0-9]{8}$/, // Mobile: 6-7xxxxxxxxx (9 digits)
                    /^[2-5][0-9]{7}$/, // Landline: 2-5xxxxxxxx (8 digits)
                    /^\+212[67][0-9]{8}$/, // International mobile
                    /^\+212[2-5][0-9]{7}$/ // International landline
                ],
                placeholder: '6xxxxxxxxx or 7xxxxxxxxx',
                description: 'Mobile: 9 digits (6-7xxxxxxxxx), Landline: 8 digits (2-5xxxxxxxx)'
            },
            'LY': {
                name: 'Libya',
                code: '+218',
                patterns: [
                    /^9[0-9]{8}$/, // Mobile: 9xxxxxxxxx (9 digits)
                    /^[2-4][0-9]{7}$/, // Landline: 2-4xxxxxxxx (8 digits)
                    /^\+2189[0-9]{8}$/, // International mobile
                    /^\+218[2-4][0-9]{7}$/ // International landline
                ],
                placeholder: '9xxxxxxxxx',
                description: 'Mobile: 9 digits (9xxxxxxxxx), Landline: 8 digits (2-4xxxxxxxx)'
            },
            'SD': {
                name: 'Sudan',
                code: '+249',
                patterns: [
                    /^9[0-9]{8}$/, // Mobile: 9xxxxxxxxx (9 digits)
                    /^[1-8][0-9]{7}$/, // Landline: 1-8xxxxxxxx (8 digits)
                    /^\+2499[0-9]{8}$/, // International mobile
                    /^\+249[1-8][0-9]{7}$/ // International landline
                ],
                placeholder: '9xxxxxxxxx',
                description: 'Mobile: 9 digits (9xxxxxxxxx), Landline: 8 digits (1-8xxxxxxxx)'
            },
            'SS': {
                name: 'South Sudan',
                code: '+211',
                patterns: [
                    /^9[0-9]{8}$/, // Mobile: 9xxxxxxxxx (9 digits)
                    /^[1-8][0-9]{7}$/, // Landline: 1-8xxxxxxxx (8 digits)
                    /^\+2119[0-9]{8}$/, // International mobile
                    /^\+211[1-8][0-9]{7}$/ // International landline
                ],
                placeholder: '9xxxxxxxxx',
                description: 'Mobile: 9 digits (9xxxxxxxxx), Landline: 8 digits (1-8xxxxxxxx)'
            },
            'DJ': {
                name: 'Djibouti',
                code: '+253',
                patterns: [
                    /^[67][0-9]{7}$/, // Mobile: 6-7xxxxxxxx (8 digits)
                    /^[2-4][0-9]{6}$/, // Landline: 2-4xxxxxx (7 digits)
                    /^\+253[67][0-9]{7}$/, // International mobile
                    /^\+253[2-4][0-9]{6}$/ // International landline
                ],
                placeholder: '6xxxxxxxx or 7xxxxxxxx',
                description: 'Mobile: 8 digits (6-7xxxxxxxx), Landline: 7 digits (2-4xxxxxx)'
            },
            'SO': {
                name: 'Somalia',
                code: '+252',
                patterns: [
                    /^[67][0-9]{7}$/, // Mobile: 6-7xxxxxxxx (8 digits)
                    /^[1-4][0-9]{6}$/, // Landline: 1-4xxxxxx (7 digits)
                    /^\+252[67][0-9]{7}$/, // International mobile
                    /^\+252[1-4][0-9]{6}$/ // International landline
                ],
                placeholder: '6xxxxxxxx or 7xxxxxxxx',
                description: 'Mobile: 8 digits (6-7xxxxxxxx), Landline: 7 digits (1-4xxxxxx)'
            },
            'KM': {
                name: 'Comoros',
                code: '+269',
                patterns: [
                    /^[3-9][0-9]{6}$/, // Mobile: 3-9xxxxxx (7 digits)
                    /^[2-9][0-9]{6}$/, // Landline: 2-9xxxxxx (7 digits)
                    /^\+269[3-9][0-9]{6}$/, // International mobile
                    /^\+269[2-9][0-9]{6}$/ // International landline
                ],
                placeholder: '3xxxxxx',
                description: 'Mobile: 7 digits (3-9xxxxxx), Landline: 7 digits (2-9xxxxxx)'
            },
            'MR': {
                name: 'Mauritania',
                code: '+222',
                patterns: [
                    /^[2-9][0-9]{7}$/, // Mobile: 2-9xxxxxxxx (8 digits)
                    /^4[0-9]{6}$/, // Landline: 4xxxxxx (7 digits)
                    /^\+222[2-9][0-9]{7}$/, // International mobile
                    /^\+2224[0-9]{6}$/ // International landline
                ],
                placeholder: '2xxxxxxxx or 4xxxxxxxx',
                description: 'Mobile: 8 digits (2-9xxxxxxxx), Landline: 7 digits (4xxxxxx)'
            }
        };

        function updatePhonePlaceholder(fieldId) {
            const countrySelect = document.getElementById(fieldId === 'phone' ? 'phoneCountry' : 'parentPhoneCountry');
            const phoneInput = document.getElementById(fieldId);
            const country = countrySelect.value;
            
            if (phoneValidationRules[country]) {
                phoneInput.placeholder = phoneValidationRules[country].placeholder;
            }
        }
        
        // Custom dropdown functions
        function toggleDropdown(dropdownId) {
            const options = document.getElementById(dropdownId + 'Options');
            const selected = document.querySelector(`#${dropdownId}Options`).parentElement.querySelector('.dropdown-selected');
            
            // Close all other dropdowns
            document.querySelectorAll('.dropdown-options').forEach(opt => {
                if (opt.id !== dropdownId + 'Options') {
                    opt.style.display = 'none';
                    opt.parentElement.querySelector('.dropdown-selected').classList.remove('active');
                }
            });
            
            // Toggle current dropdown
            if (options.style.display === 'none' || !options.style.display) {
                options.style.display = 'block';
                selected.classList.add('active');
            } else {
                options.style.display = 'none';
                selected.classList.remove('active');
            }
        }
        
        function selectCountry(dropdownId, countryCode, flag, countryText) {
            const selected = document.querySelector(`#${dropdownId}Options`).parentElement.querySelector('.dropdown-selected');
            const hiddenInput = document.getElementById(dropdownId);
            const options = document.getElementById(dropdownId + 'Options');
            
            // Update selected display
            selected.querySelector('.flag').textContent = flag;
            selected.querySelector('.country-text').textContent = countryText;
            
            // Update hidden input
            hiddenInput.value = countryCode;
            
            // Close dropdown
            options.style.display = 'none';
            selected.classList.remove('active');
            
            // Update placeholder for the phone input
            const phoneFieldId = dropdownId === 'phoneCountry' ? 'phone' : 'parentPhone';
            updatePhonePlaceholder(phoneFieldId);
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.custom-dropdown')) {
                document.querySelectorAll('.dropdown-options').forEach(options => {
                    options.style.display = 'none';
                    options.parentElement.querySelector('.dropdown-selected').classList.remove('active');
                });
            }
        });
        
        // Auto-detect user's country
        function autoDetectCountry() {
            const apiConfig = window.API_CONFIG || { apiURL: 'https://elbadry-production.up.railway.app/api' };
            const geoEndpoint = `${apiConfig.apiURL}/utils/ip-geolocation`;
            
            // Try to get user's country from IP geolocation via backend proxy
            fetch(geoEndpoint)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Geo endpoint returned an error');
                    }
                    return response.json();
                })
                .then(data => {
                    const countryCode = data.country_code;
                    console.log('Detected country:', countryCode, data.country_name);
                    
                    // Map of country codes to our supported countries
                    const countryMapping = {
                        'EG': { code: 'EG', flag: 'ðŸ‡ªðŸ‡¬', name: 'Egypt (+20)' },
                        'SA': { code: 'SA', flag: 'ðŸ‡¸ðŸ‡¦', name: 'Saudi Arabia (+966)' },
                        'AE': { code: 'AE', flag: 'ðŸ‡¦ðŸ‡ª', name: 'United Arab Emirates (+971)' },
                        'KW': { code: 'KW', flag: 'ðŸ‡°ðŸ‡¼', name: 'Kuwait (+965)' },
                        'QA': { code: 'QA', flag: 'ðŸ‡¶ðŸ‡¦', name: 'Qatar (+974)' },
                        'BH': { code: 'BH', flag: 'ðŸ‡§ðŸ‡­', name: 'Bahrain (+973)' },
                        'OM': { code: 'OM', flag: 'ðŸ‡´ðŸ‡²', name: 'Oman (+968)' },
                        'JO': { code: 'JO', flag: 'ðŸ‡¯ðŸ‡´', name: 'Jordan (+962)' },
                        'LB': { code: 'LB', flag: 'ðŸ‡±ðŸ‡§', name: 'Lebanon (+961)' },
                        'IQ': { code: 'IQ', flag: 'ðŸ‡®ðŸ‡¶', name: 'Iraq (+964)' },
                        'SY': { code: 'SY', flag: 'ðŸ‡¸ðŸ‡¾', name: 'Syria (+963)' },
                        'YE': { code: 'YE', flag: 'ðŸ‡¾ðŸ‡ª', name: 'Yemen (+967)' },
                        'PS': { code: 'PS', flag: 'ðŸ‡µðŸ‡¸', name: 'Palestine (+970)' },
                        'TN': { code: 'TN', flag: 'ðŸ‡¹ðŸ‡³', name: 'Tunisia (+216)' },
                        'DZ': { code: 'DZ', flag: 'ðŸ‡©ðŸ‡¿', name: 'Algeria (+213)' },
                        'MA': { code: 'MA', flag: 'ðŸ‡²ðŸ‡¦', name: 'Morocco (+212)' },
                        'LY': { code: 'LY', flag: 'ðŸ‡±ðŸ‡¾', name: 'Libya (+218)' },
                        'SD': { code: 'SD', flag: 'ðŸ‡¸ðŸ‡©', name: 'Sudan (+249)' },
                        'SS': { code: 'SS', flag: 'ðŸ‡¸ðŸ‡¸', name: 'South Sudan (+211)' },
                        'DJ': { code: 'DJ', flag: 'ðŸ‡©ðŸ‡¯', name: 'Djibouti (+253)' },
                        'SO': { code: 'SO', flag: 'ðŸ‡¸ðŸ‡´', name: 'Somalia (+252)' },
                        'KM': { code: 'KM', flag: 'ðŸ‡°ðŸ‡²', name: 'Comoros (+269)' },
                        'MR': { code: 'MR', flag: 'ðŸ‡²ðŸ‡·', name: 'Mauritania (+222)' }
                    };
                    
                    if (countryMapping[countryCode]) {
                        const country = countryMapping[countryCode];
                        
                        // Auto-select for both dropdowns
                        selectCountry('phoneCountry', country.code, country.flag, country.name);
                        selectCountry('parentPhoneCountry', country.code, country.flag, country.name);
                        
                        // Show a subtle notification
                        // showAutoDetectNotification(country.name);
                    }
                })
                .catch(error => {
                    console.log('Could not auto-detect country:', error);
                    // Fallback: use browser language or timezone
                    autoDetectFallback();
                });
        }
        
        function autoDetectFallback() {
            // Try to detect from browser language
            const language = navigator.language || navigator.userLanguage;
            const langCode = language.split('-')[0].toLowerCase();
            
            // Try to detect from timezone
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            
            console.log('Browser language:', language, 'Timezone:', timezone);
            
            // Simple timezone-based detection
            if (timezone.includes('Cairo') || timezone.includes('Egypt')) {
                selectCountry('phoneCountry', 'EG', 'ðŸ‡ªðŸ‡¬', 'Egypt (+20)');
                selectCountry('parentPhoneCountry', 'EG', 'ðŸ‡ªðŸ‡¬', 'Egypt (+20)');
            } else if (timezone.includes('Riyadh') || timezone.includes('Saudi')) {
                selectCountry('phoneCountry', 'SA', 'ðŸ‡¸ðŸ‡¦', 'Saudi Arabia (+966)');
                selectCountry('parentPhoneCountry', 'SA', 'ðŸ‡¸ðŸ‡¦', 'Saudi Arabia (+966)');
            } else if (timezone.includes('Dubai') || timezone.includes('Abu_Dhabi')) {
                selectCountry('phoneCountry', 'AE', 'ðŸ‡¦ðŸ‡ª', 'United Arab Emirates (+971)');
                selectCountry('parentPhoneCountry', 'AE', 'ðŸ‡¦ðŸ‡ª', 'United Arab Emirates (+971)');
            } else if (timezone.includes('Kuwait')) {
                selectCountry('phoneCountry', 'KW', 'ðŸ‡°ðŸ‡¼', 'Kuwait (+965)');
                selectCountry('parentPhoneCountry', 'KW', 'ðŸ‡°ðŸ‡¼', 'Kuwait (+965)');
            } else if (timezone.includes('Doha') || timezone.includes('Qatar')) {
                selectCountry('phoneCountry', 'QA', 'ðŸ‡¶ðŸ‡¦', 'Qatar (+974)');
                selectCountry('parentPhoneCountry', 'QA', 'ðŸ‡¶ðŸ‡¦', 'Qatar (+974)');
            } else if (timezone.includes('Manama') || timezone.includes('Bahrain')) {
                selectCountry('phoneCountry', 'BH', 'ðŸ‡§ðŸ‡­', 'Bahrain (+973)');
                selectCountry('parentPhoneCountry', 'BH', 'ðŸ‡§ðŸ‡­', 'Bahrain (+973)');
            } else if (timezone.includes('Muscat') || timezone.includes('Oman')) {
                selectCountry('phoneCountry', 'OM', 'ðŸ‡´ðŸ‡²', 'Oman (+968)');
                selectCountry('parentPhoneCountry', 'OM', 'ðŸ‡´ðŸ‡²', 'Oman (+968)');
            } else if (timezone.includes('Amman') || timezone.includes('Jordan')) {
                selectCountry('phoneCountry', 'JO', 'ðŸ‡¯ðŸ‡´', 'Jordan (+962)');
                selectCountry('parentPhoneCountry', 'JO', 'ðŸ‡¯ðŸ‡´', 'Jordan (+962)');
            } else if (timezone.includes('Beirut') || timezone.includes('Lebanon')) {
                selectCountry('phoneCountry', 'LB', 'ðŸ‡±ðŸ‡§', 'Lebanon (+961)');
                selectCountry('parentPhoneCountry', 'LB', 'ðŸ‡±ðŸ‡§', 'Lebanon (+961)');
            } else if (timezone.includes('Baghdad') || timezone.includes('Iraq')) {
                selectCountry('phoneCountry', 'IQ', 'ðŸ‡®ðŸ‡¶', 'Iraq (+964)');
                selectCountry('parentPhoneCountry', 'IQ', 'ðŸ‡®ðŸ‡¶', 'Iraq (+964)');
            } else if (timezone.includes('Damascus') || timezone.includes('Syria')) {
                selectCountry('phoneCountry', 'SY', 'ðŸ‡¸ðŸ‡¾', 'Syria (+963)');
                selectCountry('parentPhoneCountry', 'SY', 'ðŸ‡¸ðŸ‡¾', 'Syria (+963)');
            } else if (timezone.includes('Sana') || timezone.includes('Yemen')) {
                selectCountry('phoneCountry', 'YE', 'ðŸ‡¾ðŸ‡ª', 'Yemen (+967)');
                selectCountry('parentPhoneCountry', 'YE', 'ðŸ‡¾ðŸ‡ª', 'Yemen (+967)');
            } else if (timezone.includes('Tunis') || timezone.includes('Tunisia')) {
                selectCountry('phoneCountry', 'TN', 'ðŸ‡¹ðŸ‡³', 'Tunisia (+216)');
                selectCountry('parentPhoneCountry', 'TN', 'ðŸ‡¹ðŸ‡³', 'Tunisia (+216)');
            } else if (timezone.includes('Algiers') || timezone.includes('Algeria')) {
                selectCountry('phoneCountry', 'DZ', 'ðŸ‡©ðŸ‡¿', 'Algeria (+213)');
                selectCountry('parentPhoneCountry', 'DZ', 'ðŸ‡©ðŸ‡¿', 'Algeria (+213)');
            } else if (timezone.includes('Casablanca') || timezone.includes('Morocco')) {
                selectCountry('phoneCountry', 'MA', 'ðŸ‡²ðŸ‡¦', 'Morocco (+212)');
                selectCountry('parentPhoneCountry', 'MA', 'ðŸ‡²ðŸ‡¦', 'Morocco (+212)');
            } else if (timezone.includes('Tripoli') || timezone.includes('Libya')) {
                selectCountry('phoneCountry', 'LY', 'ðŸ‡±ðŸ‡¾', 'Libya (+218)');
                selectCountry('parentPhoneCountry', 'LY', 'ðŸ‡±ðŸ‡¾', 'Libya (+218)');
            } else if (timezone.includes('Khartoum') || timezone.includes('Sudan')) {
                selectCountry('phoneCountry', 'SD', 'ðŸ‡¸ðŸ‡©', 'Sudan (+249)');
                selectCountry('parentPhoneCountry', 'SD', 'ðŸ‡¸ðŸ‡©', 'Sudan (+249)');
            } else if (timezone.includes('Juba') || timezone.includes('South_Sudan')) {
                selectCountry('phoneCountry', 'SS', 'ðŸ‡¸ðŸ‡¸', 'South Sudan (+211)');
                selectCountry('parentPhoneCountry', 'SS', 'ðŸ‡¸ðŸ‡¸', 'South Sudan (+211)');
            } else if (timezone.includes('Djibouti')) {
                selectCountry('phoneCountry', 'DJ', 'ðŸ‡©ðŸ‡¯', 'Djibouti (+253)');
                selectCountry('parentPhoneCountry', 'DJ', 'ðŸ‡©ðŸ‡¯', 'Djibouti (+253)');
            } else if (timezone.includes('Mogadishu') || timezone.includes('Somalia')) {
                selectCountry('phoneCountry', 'SO', 'ðŸ‡¸ðŸ‡´', 'Somalia (+252)');
                selectCountry('parentPhoneCountry', 'SO', 'ðŸ‡¸ðŸ‡´', 'Somalia (+252)');
            } else if (timezone.includes('Comoros')) {
                selectCountry('phoneCountry', 'KM', 'ðŸ‡°ðŸ‡²', 'Comoros (+269)');
                selectCountry('parentPhoneCountry', 'KM', 'ðŸ‡°ðŸ‡²', 'Comoros (+269)');
            } else if (timezone.includes('Nouakchott') || timezone.includes('Mauritania')) {
                selectCountry('phoneCountry', 'MR', 'ðŸ‡²ðŸ‡·', 'Mauritania (+222)');
                selectCountry('parentPhoneCountry', 'MR', 'ðŸ‡²ðŸ‡·', 'Mauritania (+222)');
            }
            // If no match found, keep default (Egypt)
        }
        

        function validateMiddleEastPhone(fieldId) {
            const phoneInput = document.getElementById(fieldId);
            const errorDiv = document.getElementById(fieldId + 'Error');
            const countrySelect = document.getElementById(fieldId === 'phone' ? 'phoneCountry' : 'parentPhoneCountry');
            const phoneValue = phoneInput.value.trim();
            const country = countrySelect.value;
            
            // If field is empty and not required, it's valid
            if (!phoneValue) {
                if (fieldId === 'phone') {
                    // Student phone is optional
                    if (errorDiv) errorDiv.style.display = 'none';
                    phoneInput.classList.remove('is-invalid');
                    return true;
                }
            }
            
            if (!country || !phoneValidationRules[country]) {
                if (errorDiv) {
                    errorDiv.textContent = 'Please select a valid country';
                    errorDiv.style.display = 'block';
                }
                phoneInput.classList.remove('is-valid');
                phoneInput.classList.add('is-invalid');
                return false;
            }
            
            const rules = phoneValidationRules[country];
            const isValid = rules.patterns.some(pattern => pattern.test(phoneValue));
            
            if (errorDiv) {
                if (isValid) {
                    errorDiv.style.display = 'none';
                } else {
                    errorDiv.textContent = `Not a valid ${rules.name} phone number. ${rules.description}`;
                    errorDiv.style.display = 'block';
                }
            }
            
            if (isValid) {
                phoneInput.classList.remove('is-invalid');
                phoneInput.classList.add('is-valid');
            } else {
                phoneInput.classList.remove('is-valid');
                phoneInput.classList.add('is-invalid');
            }
            
            return isValid;
        }

        // Toggle password visibility function
        function togglePasswordIconVisibility(fieldId, toggleBtnId) {
            const passwordInput = document.getElementById(fieldId);
            const toggleBtn = document.getElementById(toggleBtnId);
            
            if (passwordInput && toggleBtn) {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggleBtn.innerHTML = `<iconify-icon icon="material-symbols:visibility" style="font-size: 18px; color: #6b7280;"></iconify-icon>`;
                    toggleBtn.style.display = 'inline-block';
                    toggleBtn.style.borderLeft = 'none';
                    toggleBtn.style.borderRadius = '0 10px 10px 0';
                } else {
                    passwordInput.type = 'password';
                    toggleBtn.innerHTML = `<iconify-icon icon="material-symbols:visibility-off" style="font-size: 18px; color: #6b7280;"></iconify-icon>`;
                    toggleBtn.style.display = 'inline-block';
                    toggleBtn.style.borderLeft = 'none';
                    toggleBtn.style.borderRadius = '0 10px 10px 0';
                }
            }
        }

        // Check login state and update UI
        function checkLoginState() {
            const isLoggedIn = localStorage.getItem('userLoggedIn');
            const userName = localStorage.getItem('userName');
            
            if (isLoggedIn) {
                // Show user name in utility bar
                const userNameDisplay = document.getElementById('userNameDisplay');
                const displayUserName = document.getElementById('displayUserName');
                if (userNameDisplay && displayUserName) {
                    userNameDisplay.style.display = 'block';
                    displayUserName.textContent = userName || 'User';
                }
                
                // Hide login and register buttons, show logout
                const loginBtn = document.querySelector('.login-btn');
                const registerBtn = document.querySelector('.register-btn');
                
                if (loginBtn) {
                    loginBtn.style.display = 'none';
                toggleBtn = document.getElementById('loginPasswordToggleBtn');
            } else if (fieldId === 'password') {
                toggleBtn = document.getElementById('passwordToggleBtn');
            } else if (fieldId === 'confirmPassword') {
                toggleBtn = document.getElementById('confirmPasswordToggleBtn');
            } else if (fieldId === 'newPassword') {
                toggleBtn = document.getElementById('newPasswordToggleBtn');
            } else if (fieldId === 'confirmNewPassword') {
                toggleBtn = document.getElementById('confirmNewPasswordToggleBtn');
            }
            
            if (passwordInput && toggleBtn) {
            if (passwordInput.value.length > 0) {
                toggleBtn.style.display = 'block';
            } else {
                toggleBtn.style.display = 'none';
                }
            }
        }

        // Clear registration form data
        function clearRegistrationData() {
            const formFields = ['firstName', 'lastName', 'email', 'phone', 'parentPhone', 'password', 'confirmPassword'];
            const checkboxFields = ['agreeTerms'];
            
            // Clear text inputs
            formFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.value = '';
                    field.classList.remove('is-valid', 'is-invalid');
                }
            });
            
            // Reset custom dropdowns to Egypt
            resetDropdown('phoneCountry', 'EG', 'ðŸ‡ªðŸ‡¬', 'Egypt (+20)');
            resetDropdown('parentPhoneCountry', 'EG', 'ðŸ‡ªðŸ‡¬', 'Egypt (+20)');
            
            // Clear checkboxes
            checkboxFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.checked = false;
                }
            });
        }
        
        function resetDropdown(dropdownId, countryCode, flag, countryText) {
            const selected = document.querySelector(`#${dropdownId}Options`).parentElement.querySelector('.dropdown-selected');
            const hiddenInput = document.getElementById(dropdownId);
            
            // Reset selected display
            selected.querySelector('.flag').textContent = flag;
            selected.querySelector('.country-text').textContent = countryText;
            
            // Reset hidden input
            hiddenInput.value = countryCode;
            
            // Close dropdown if open
            const options = document.getElementById(dropdownId + 'Options');
            options.style.display = 'none';
            selected.classList.remove('active');
        }

        // Course data
        const courses = {
            mathematics: {
                title: 'IGCSE Mathematics (Extended)',
                instructor: 'Dr. Sarah Mitchell',
                board: 'Cambridge Board',
                price: '299.00 EGP',
                originalPrice: '399.00 EGP',
                rating: 4.9,
                image: 'images/teacher1.PNG'
            },
            physics: {
                title: 'IGCSE Physics (Extended)',
                instructor: 'Prof. Michael Chen',
                board: 'Edexcel Board',
                price: '279.00 EGP',
                originalPrice: '349.00 EGP',
                rating: 4.8,
                image: 'images/teacher2.PNG'
            },
            english: {
                title: 'IGCSE English Language',
                instructor: 'Dr. Emily Rodriguez',
                board: 'Cambridge Board',
                price: '249.00 EGP',
                originalPrice: '329.00 EGP',
                rating: 4.9,
                image: 'images/teacher3.PNG'
            }
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded successfully!');
            
            // Force logout on every visit - only clear authentication data
            localStorage.removeItem('userLoggedIn');
            localStorage.removeItem('userName');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('userPhone');
            localStorage.removeItem('authToken');
            
            // Auto-detect user's country for phone number dropdowns
            setTimeout(() => {
                autoDetectCountry();
            }, 1000); // Delay to ensure page is fully loaded
            
            // Clear password field when login modal opens
            document.getElementById('loginModal').addEventListener('show.bs.modal', function () {
                setTimeout(() => {
                    document.getElementById('loginPassword').value = '';
                }, 50);
            });
            
            // Keep user preferences and data
            // localStorage.removeItem('cart'); // Keep cart for checkout
            // localStorage.removeItem('favorites'); // Keep favorites
            // localStorage.removeItem('enrolledCourses'); // Keep enrollments
            // localStorage.removeItem('recentActivities'); // Keep activities
            // localStorage.removeItem('previousEnrollments'); // Keep previous enrollments
            
            // Clear any registration form data
            clearRegistrationData();
            
            checkLoginState();
            updateCartCount();
            updateCartModal();
            updateFavoritesModal();
            
            // Reset password visibility when modals are shown
            document.getElementById('loginModal').addEventListener('show.bs.modal', function() {
                const loginPasswordInput = document.getElementById('loginPassword');
                const loginPasswordToggle = document.getElementById('loginPasswordToggle');
                if (loginPasswordInput && loginPasswordToggle) {
                    loginPasswordInput.type = 'password';
                    loginPasswordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    loginPasswordToggle.style.color = '#6b7280';
                }
            });
            
            document.getElementById('registerModal').addEventListener('show.bs.modal', function() {
                const passwordInput = document.getElementById('password');
                const passwordToggle = document.getElementById('passwordToggle');
                const passwordToggleBtn = document.getElementById('passwordToggleBtn');
                const confirmPasswordInput = document.getElementById('confirmPassword');
                const confirmPasswordToggle = document.getElementById('confirmPasswordToggle');
                const confirmPasswordToggleBtn = document.getElementById('confirmPasswordToggleBtn');
                
                if (passwordInput && passwordToggle) {
                    passwordInput.type = 'password';
                    passwordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    passwordToggle.style.color = '#6b7280';
                }
                
                if (passwordToggleBtn) {
                    passwordToggleBtn.style.display = 'none';
                }
                
                if (confirmPasswordInput && confirmPasswordToggle) {
                    confirmPasswordInput.type = 'password';
                    confirmPasswordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    confirmPasswordToggle.style.color = '#6b7280';
                }
                
                if (confirmPasswordToggleBtn) {
                    confirmPasswordToggleBtn.style.display = 'none';
                }
            });
            
            // Reset password visibility for forgot password modal
            document.getElementById('forgotPasswordModal').addEventListener('show.bs.modal', function() {
                const newPasswordInput = document.getElementById('newPassword');
                const newPasswordToggle = document.getElementById('newPasswordToggle');
                const newPasswordToggleBtn = document.getElementById('newPasswordToggleBtn');
                const confirmNewPasswordInput = document.getElementById('confirmNewPassword');
                const confirmNewPasswordToggle = document.getElementById('confirmNewPasswordToggle');
                const confirmNewPasswordToggleBtn = document.getElementById('confirmNewPasswordToggleBtn');
                
                if (newPasswordInput && newPasswordToggle) {
                    newPasswordInput.type = 'password';
                    newPasswordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    newPasswordToggle.style.color = '#6b7280';
                }
                
                if (newPasswordToggleBtn) {
                    newPasswordToggleBtn.style.display = 'none';
                }
                
                if (confirmNewPasswordInput && confirmNewPasswordToggle) {
                    confirmNewPasswordInput.type = 'password';
                    confirmNewPasswordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    confirmNewPasswordToggle.style.color = '#6b7280';
                }
                
                if (confirmNewPasswordToggleBtn) {
                    confirmNewPasswordToggleBtn.style.display = 'none';
                }
            });
            
            // Initialize Swiper for testimonials
            if (typeof Swiper !== 'undefined') {
                const testimonialSwiper = new Swiper('.testimonial-swiper', {
                    slidesPerView: 1,
                    spaceBetween: 30,
                    loop: true,
                    autoplay: {
                        delay: 5000,
                        disableOnInteraction: false,
                    },
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                    breakpoints: {
                        768: {
                            slidesPerView: 1,
                        },
                        1024: {
                            slidesPerView: 1,
                        },
                    },
                });
            }
        });

        // Cart functions - now using unified cart system
        window.addToCart = function(courseId) {
            console.log('ðŸŽ¯ index.html addToCart called with:', courseId);
            
            const course = courses[courseId];
            if (!course) {
                showToast('Course not found!', 'error');
                return;
            }
            
            const courseData = {
                courseId: courseId,
                id: courseId,
                title: course.title,
                price: parseFloat(course.price.replace(/EGP|Â£/g, '').replace(/\s/g, '').trim()),
                instructor: course.instructor,
                board: course.board,
                image: course.image,
                description: course.description,
                quantity: 1
            };
            
            console.log('ðŸ“¦ Course data prepared:', courseData);
            
            // Use unified cart system
            if (window.cartManager) {
                window.cartManager.addToCart(courseData);
            } else {
                // Fallback for when cart system isn't loaded yet
                console.warn('Cart manager not available, using fallback');
                const existingItem = cart.find(item => item.courseId === courseId);
                if (existingItem) {
                    showToast('This course is already in your cart!', 'warning');
                    return;
                }
                
                cart.push(courseData);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                updateCartModal();
                showToast('Course added to cart!', 'success');
            }
        };

        // ============================================
        // ENROLLMENT FLOW - Updated: 2026-02-07 v2
        // ============================================
        
        // Enroll in course function - redirects to checkout
        window.enrollInCourse = function(courseId) {
            console.log('ðŸŽ“ Enroll Now clicked for:', courseId);
            console.log('ðŸ” Checking login status...');
            
            const isLoggedIn = localStorage.getItem('userLoggedIn');
            console.log('âœ… Is logged in:', isLoggedIn);
            
            if (!isLoggedIn) {
                console.log('âŒ User not logged in - showing auth choice modal');
                
                // Store pending course for post-login checkout
                const course = courses[courseId];
                if (!course) {
                    showToast('Course not found!', 'error');
                    return;
                }
                
                const courseData = {
                    courseId: courseId,
                    id: courseId,
                    title: course.title,
                    price: parseFloat(course.price.replace(/EGP|Â£/g, '').replace(/\s/g, '').trim()),
                    instructor: course.instructor,
                    board: course.board,
                    image: course.image,
                    quantity: 1
                };
                
                localStorage.setItem('pendingEnrollment', JSON.stringify(courseData));
                console.log('ðŸ’¾ Saved pending enrollment:', courseData);
                
                // Show auth choice modal
                console.log('ðŸŽ¨ Calling showAuthChoiceModal...');
                showAuthChoiceModal(courseData);
                return;
            }
            
            console.log('âœ… User logged in - proceeding to checkout');
            // User is logged in - proceed to checkout
            proceedToCheckout(courseId);
        };
        
        // Verify function is loaded
        console.log('âœ… enrollInCourse function loaded:', typeof window.enrollInCourse);
        
        // Show authentication choice modal
        function showAuthChoiceModal(courseData) {
            console.log('ðŸŽ¨ showAuthChoiceModal called with:', courseData);
            console.log('ðŸ” Bootstrap available:', typeof bootstrap !== 'undefined');
            
            const modalHTML = `
                <div class="modal fade" id="authChoiceModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content" style="border-radius: 20px; border: none; overflow: hidden;">
                            <div class="modal-header" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 30px;">
                                <div>
                                    <h5 class="modal-title mb-2" style="font-size: 1.5rem; font-weight: 700;">
                                        <iconify-icon icon="material-symbols:school" class="me-2"></iconify-icon>
                                        Enroll in ${courseData.title}
                                    </h5>
                                    <p class="mb-0" style="opacity: 0.9; font-size: 0.9rem;">Please login or create an account to continue</p>
                                </div>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body" style="padding: 40px;">
                                <div class="text-center mb-4">
                                    <img src="${courseData.image}" alt="${courseData.title}" 
                                         style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 3px solid #667eea;">
                                    <h6 class="mt-3 mb-1">${courseData.title}</h6>
                                    <p class="text-muted mb-0">${courseData.instructor}</p>
                                    <p class="text-primary fw-bold fs-4 mt-2">${courseData.price.toFixed(2)} EGP</p>
                                </div>
                                
                                <div class="d-grid gap-3">
                                    <button class="btn btn-primary btn-lg" onclick="loginAndEnroll()" style="border-radius: 12px; padding: 15px; font-weight: 600;">
                                        <iconify-icon icon="material-symbols:login" class="me-2"></iconify-icon>
                                        I Have an Account - Login
                                    </button>
                                    <button class="btn btn-outline-primary btn-lg" onclick="registerAndEnroll()" style="border-radius: 12px; padding: 15px; font-weight: 600;">
                                        <iconify-icon icon="material-symbols:person-add" class="me-2"></iconify-icon>
                                        I'm New - Create Account
                                    </button>
                                </div>
                                
                                <div class="text-center mt-4">
                                    <small class="text-muted">
                                        <iconify-icon icon="material-symbols:lock" class="me-1"></iconify-icon>
                                        Your information is secure and encrypted
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            console.log('ðŸ“ Modal HTML created, length:', modalHTML.length);
            
            // Remove existing modal if any
            const existingModal = document.getElementById('authChoiceModal');
            if (existingModal) {
                console.log('ðŸ—‘ï¸ Removing existing modal');
                existingModal.remove();
            }
            
            // Add modal to body
            console.log('âž• Adding modal to body');
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Verify modal was added
            const addedModal = document.getElementById('authChoiceModal');
            console.log('âœ… Modal added to DOM:', addedModal !== null);
            
            if (!addedModal) {
                console.error('âŒ Failed to add modal to DOM!');
                alert('Error: Could not create enrollment modal. Please refresh the page and try again.');
                return;
            }
            
            // Show modal
            try {
                console.log('ðŸŽ­ Creating Bootstrap modal instance...');
                const authModal = new bootstrap.Modal(addedModal);
                console.log('ðŸŽ­ Showing modal...');
                authModal.show();
                console.log('âœ… Modal shown successfully');
            } catch (error) {
                console.error('âŒ Error showing modal:', error);
                alert('Error: Could not display enrollment modal. Please refresh the page and try again.');
            }
        }
        
        // Login and enroll
        window.loginAndEnroll = function() {
            // Close auth choice modal
            const authModal = bootstrap.Modal.getInstance(document.getElementById('authChoiceModal'));
            if (authModal) authModal.hide();
            
            // Open login modal
            setTimeout(() => {
                const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
                loginModal.show();
                
                // Clear password field
                setTimeout(() => {
                    document.getElementById('loginPassword').value = '';
                }, 100);
            }, 300);
        };
        
        // Register and enroll
        window.registerAndEnroll = function() {
            // Close auth choice modal
            const authModal = bootstrap.Modal.getInstance(document.getElementById('authChoiceModal'));
            if (authModal) authModal.hide();
            
            // Open register modal
            setTimeout(() => {
                const registerModal = new bootstrap.Modal(document.getElementById('registerModal'));
                registerModal.show();
            }, 300);
        };
        
        // Proceed to checkout with course
        function proceedToCheckout(courseId) {
            const course = courses[courseId];
            if (!course) {
                showToast('Course not found!', 'error');
                return;
            }
            
            // Check if already enrolled
            let enrolledCourses = JSON.parse(localStorage.getItem('enrolledCourses')) || [];
            if (enrolledCourses.includes(courseId)) {
                showToast('You are already enrolled in this course!', 'info');
                return;
            }
            
            const courseData = {
                courseId: courseId,
                id: courseId,
                title: course.title,
                price: parseFloat(course.price.replace(/EGP|Â£/g, '').replace(/\s/g, '').trim()),
                instructor: course.instructor,
                board: course.board,
                image: course.image,
                quantity: 1
            };
            
            // Clear cart and add only this course
            if (window.cartManager) {
                window.cartManager.clearCart();
                window.cartManager.addToCart(courseData);
            } else {
                localStorage.setItem('cart', JSON.stringify([courseData]));
            }
            
            // Redirect to checkout
            showToast('Redirecting to checkout...', 'success');
            setTimeout(() => {
                window.location.href = 'checkout.html';
            }, 500);
        }
        
        // Handle post-login enrollment
        window.handlePostLoginEnrollment = function() {
            const pendingEnrollment = localStorage.getItem('pendingEnrollment');
            if (pendingEnrollment) {
                try {
                    const courseData = JSON.parse(pendingEnrollment);
                    localStorage.removeItem('pendingEnrollment');
                    
                    // Clear cart and add course
                    if (window.cartManager) {
                        window.cartManager.clearCart();
                        window.cartManager.addToCart(courseData);
                    } else {
                        localStorage.setItem('cart', JSON.stringify([courseData]));
                    }
                    
                    // Redirect to checkout
                    showToast('Redirecting to checkout...', 'success');
                    setTimeout(() => {
                        window.location.href = 'checkout.html';
                    }, 500);
                } catch (error) {
                    console.error('Error handling post-login enrollment:', error);
                }
            }
            
            // Clear existing cart and add only this course
            cart = [courseData];
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Update cart count immediately
            updateCartCount();
            
            showToast(`Preparing ${course.title} for checkout...`, 'success');
            
            // Redirect to checkout page with course parameter
            setTimeout(() => {
                window.location.href = `checkout.html?course=${courseId}`;
            }, 1500);
        }

        function updateCartCount() {
            // Use unified cart system if available
            if (window.cartManager) {
                window.cartManager.updateCartCount();
            } else {
                // Fallback for when cart system isn't loaded yet
                const cartCount = cart.reduce((total, item) => total + (item.quantity || 1), 0);
                const cartBadge = document.getElementById('cartCount');
                const cartModalCount = document.getElementById('cartModalCount');
                
                if (cartBadge) cartBadge.textContent = cartCount;
                if (cartModalCount) cartModalCount.textContent = cartCount;
            }
        }

        // Function to get course by ID (handles both string and numeric IDs)
        function getCourseById(courseId) {
            // Try string-based lookup first (legacy)
            let course = courses[courseId];
            
            if (!course) {
                // Try numeric ID mapping (from homenocourses.html)
                switch(courseId) {
                    case '115':
                    case 115:
                        course = courses.mathematics;
                        break;
                    case '116':
                    case 116:
                        course = courses.physics;
                        break;
                    case '117':
                    case 117:
                        course = courses.english;
                        break;
                }
            }
            
            return course;
        }

        function updateCartModal() {
            const cartList = document.getElementById('cartList');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            if (cart.length === 0) {
                cartList.innerHTML = `
                    <div class="text-center text-muted py-4">
                        <iconify-icon icon="material-symbols:shopping-cart-outline" class="fs-1 mb-3"></iconify-icon>
                        <p>Your cart is empty. Start adding courses to your cart!</p>
                    </div>
                `;
                if (checkoutBtn) checkoutBtn.disabled = true;
            } else {
                cartList.innerHTML = cart.map(item => {
                    const course = getCourseById(item.courseId);
                    if (!course) {
                        console.log('Course not found for ID:', item.courseId);
                        return '';
                    }
                    
                    return `
                        <div class="cart-item d-flex justify-content-between align-items-center mb-3 p-3 border rounded">
                            <div class="d-flex align-items-center">
                                <img src="${course.image}" alt="${course.title}" class="rounded-circle me-3" style="width: 50px; height: 50px; object-fit: cover;">
                                <div>
                                    <div class="course-title fw-bold">${course.title}</div>
                                    <div class="course-instructor text-muted small">${course.instructor} - ${course.board}</div>
                                    <div class="course-price text-primary fw-bold">${course.price} <span class="text-muted">x${item.quantity}</span></div>
                                </div>
                            </div>
                            <button class="btn btn-outline-danger btn-sm" onclick="removeFromCart('${item.courseId}')">
                                <iconify-icon icon="material-symbols:delete"></iconify-icon>
                            </button>
                        </div>
                    `;
                }).join('');
                if (checkoutBtn) checkoutBtn.disabled = false;
            }
        }

        function removeFromCart(courseId) {
            cart = cart.filter(item => item.courseId !== courseId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            updateCartModal();
            showToast('Course removed from cart', 'info');
        }

        function resetCart() {
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            updateCartModal();
            showToast('Cart has been reset', 'info');
        }

        // Global function for debugging
        window.resetCartGlobal = function() {
            localStorage.removeItem('cart');
            localStorage.removeItem('favorites');
            window.location.reload();
        };

        // Debug function to check cart state
        window.debugCart = function() {
            console.log('=== Cart Debug Info ===');
            console.log('Current cart:', cart);
            console.log('Cart from localStorage:', JSON.parse(localStorage.getItem('cart') || '[]'));
            console.log('Cart count:', cart.reduce((total, item) => total + item.quantity, 0));
            console.log('Cart badge element:', document.getElementById('cartCount'));
            console.log('Cart badge text:', document.getElementById('cartCount')?.textContent);
        };

        function proceedToCheckout() {
            if (cart.length === 0) {
                showToast('Your cart is empty!', 'warning');
                return;
            }
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('userLoggedIn');
            if (!isLoggedIn) {
                showToast('Please log in to proceed to checkout', 'warning');
                // Store pending checkout action with current cart
                localStorage.setItem('pendingCartAction', JSON.stringify({
                    action: 'proceedToCheckout',
                    cart: cart,
                    timestamp: new Date().toISOString()
                }));
                // Open login modal
                const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
                loginModal.show();
                
                // Clear password field when modal opens
                setTimeout(() => {
                    document.getElementById('loginPassword').value = '';
                }, 100);
                return;
            }
            
            // Redirect to checkout page
            window.location.href = 'checkout.html';
        }

        // Favorites functions
        function toggleFavorite(courseId) {
            const index = favorites.indexOf(courseId);
            if (index > -1) {
                favorites.splice(index, 1);
                showToast('Course removed from favorites', 'info');
            } else {
                favorites.push(courseId);
                showToast('Course added to favorites!', 'success');
            }
            
            localStorage.setItem('favorites', JSON.stringify(favorites));
            updateFavoritesModal();
        }

        function updateFavoritesModal() {
            const favoritesList = document.getElementById('favoritesList');
            if (!favoritesList) return;
            
            if (favorites.length === 0) {
                favoritesList.innerHTML = `
                    <div class="text-center text-muted py-4">
                        <iconify-icon icon="material-symbols:favorite-outline" class="fs-1 mb-3"></iconify-icon>
                        <p>No favorite courses yet. Start adding courses to your favorites!</p>
                    </div>
                `;
            } else {
                favoritesList.innerHTML = favorites.map(courseId => {
                    const course = courses[courseId];
                    if (!course) return '';
                    
                    return `
                        <div class="d-flex justify-content-between align-items-center mb-3 p-3 border rounded">
                            <div class="d-flex align-items-center">
                                <img src="${course.image}" alt="${course.title}" class="rounded-circle me-3" style="width: 50px; height: 50px; object-fit: cover;">
                                <div>
                                    <div class="fw-bold">${course.title}</div>
                                    <div class="text-muted small">${course.instructor}</div>
                                    <div class="text-primary fw-bold">${course.price}</div>
                                </div>
                            </div>
                            <div class="d-flex align-items-center gap-2">
                                <button class="btn btn-success btn-sm" onclick="purchaseCourseFromFavorites('${courseId}')" title="Purchase Course">
                                    <iconify-icon icon="material-symbols:payment" class="me-1"></iconify-icon>
                                    Purchase
                                </button>
                                <button class="btn btn-primary btn-sm" onclick="addToCartFromFavorites('${courseId}')" title="Add to Cart">
                                    <iconify-icon icon="material-symbols:add-shopping-cart" class="me-1"></iconify-icon>
                                    Add to Cart
                                </button>
                                <button class="btn btn-outline-danger btn-sm" onclick="toggleFavorite('${courseId}')" title="Remove from Favorites">
                                    <iconify-icon icon="mdi:heart"></iconify-icon>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        // Purchase course from favorites
        function purchaseCourseFromFavorites(courseId) {
            const isLoggedIn = localStorage.getItem('userLoggedIn');
            if (!isLoggedIn) {
                showToast('Please log in to purchase courses', 'warning');
                // Close favorites modal and open login modal
                const favoritesModal = bootstrap.Modal.getInstance(document.getElementById('favoritesModal'));
                if (favoritesModal) favoritesModal.hide();
                
                setTimeout(() => {
                    const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
                    loginModal.show();
                    
                    // Clear password field when modal opens
                    setTimeout(() => {
                        document.getElementById('loginPassword').value = '';
                    }, 100);
                }, 300);
                return;
            }
            
            // Check if already enrolled
            let enrolledCourses = JSON.parse(localStorage.getItem('enrolledCourses')) || [];
            if (enrolledCourses.includes(courseId)) {
                showToast('You are already enrolled in this course!', 'info');
                return;
            }
            
            // Add course to cart with full details
            const course = courses[courseId];
            if (!course) {
                showToast('Course not found!', 'error');
                return;
            }
            
            const courseData = {
                courseId: courseId,
                id: courseId, // For checkout compatibility
                title: course.title,
                price: parseFloat(course.price.replace(/EGP|Â£/g, '').replace(/\s/g, '').trim()), // Convert to number
                instructor: course.instructor,
                board: course.board,
                image: course.image,
                quantity: 1,
                addedAt: new Date().toISOString()
            };
            
            // Clear existing cart and add only this course
            cart = [courseData];
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Update cart count immediately
            updateCartCount();
            
            showToast(`Preparing ${course.title} for checkout...`, 'success');
            
            // Close favorites modal
            const favoritesModal = bootstrap.Modal.getInstance(document.getElementById('favoritesModal'));
            if (favoritesModal) favoritesModal.hide();
            
            // Redirect to checkout page with course parameter
            setTimeout(() => {
                window.location.href = `checkout.html?course=${courseId}`;
            }, 1500);
        }

        // Add to cart from favorites
        function addToCartFromFavorites(courseId) {
            const course = courses[courseId];
            if (!course) {
                showToast('Course not found!', 'error');
                return;
            }
            
            // Check if already in cart
            const existingItem = cart.find(item => item.courseId === courseId);
            if (existingItem) {
                showToast('This course is already in your cart!', 'warning');
                return;
            }
            
            // Add to cart with full details
            const courseData = {
                courseId: courseId,
                id: courseId, // For checkout compatibility
                title: course.title,
                price: parseFloat(course.price.replace(/EGP|Â£/g, '').replace(/\s/g, '').trim()), // Convert to number
                instructor: course.instructor,
                board: course.board,
                image: course.image,
                quantity: 1,
                addedAt: new Date().toISOString()
            };
            
            cart.push(courseData);
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Update cart count and modal
            updateCartCount();
            updateCartModal();
            
            showToast(`${course.title} added to cart!`, 'success');
        }

        // Function to reset todo lists after login
        function resetTodoLists() {
            // Clear all existing todo lists from localStorage
            localStorage.removeItem('todoLists');
            console.log('Todo lists reset after login');
        }

        // Function to handle pending cart actions after login/registration
        function handlePendingCartAction() {
            const pendingAction = localStorage.getItem('pendingCartAction');
            if (!pendingAction) return null;
            
            try {
                const action = JSON.parse(pendingAction);
                console.log('Handling pending cart action:', action);
                
                // Clear the pending action
                localStorage.removeItem('pendingCartAction');
                
                return action;
            } catch (error) {
                console.error('Error parsing pending cart action:', error);
                localStorage.removeItem('pendingCartAction');
                return null;
            }
        }

        // Update login button after successful login
        function updateLoginButton() {
            const loginBtn = document.querySelector('.login-btn');
            if (loginBtn) {
                const userName = localStorage.getItem('userName');
                if (userName) {
                    loginBtn.innerHTML = `<iconify-icon icon="material-symbols:person" class="me-1"></iconify-icon>${userName}`;
                    loginBtn.classList.remove('btn-outline-secondary');
                    loginBtn.classList.add('btn-success');
                    loginBtn.removeAttribute('data-bs-target');
                    loginBtn.removeAttribute('data-bs-toggle');
                    loginBtn.onclick = function() {
                        if (confirm('Are you sure you want to logout?')) {
                            logout();
                        }
                    };
                }
            }
        }

        // Login function - now uses API
        async function handleLoginClick() {
            console.log('ðŸ”µ handleLoginClick called from INDEX.HTML inline script');
            console.log('ðŸ” Current redirect flag:', window.loginRedirectPending);
            
            // Prevent multiple redirects
            if (window.loginRedirectPending) {
                console.log('âš ï¸ Redirect already pending, ignoring login attempt');
                return;
            }
            
            // Set redirect flag to prevent duplicates
            window.loginRedirectPending = true;
            console.log('ðŸ”’ Redirect flag set to:', window.loginRedirectPending);
            
            // Disable login button to prevent double clicks
            const loginButton = document.querySelector('button[onclick="handleLoginClick()"]');
            if (loginButton) {
                loginButton.disabled = true;
                loginButton.textContent = 'Logging in...';
            }
            
            const email = document.getElementById('loginEmail').value.toLowerCase().trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showToast('Please fill in all fields', 'warning');
                // Re-enable button
                if (loginButton) {
                    loginButton.disabled = false;
                    loginButton.innerHTML = '<iconify-icon icon="material-symbols:login" class="me-2"></iconify-icon>Log In';
                }
                window.loginRedirectPending = false;
                return;
            }
            
            try {
                console.log('Logging in user:', { email });
                
                // Mock login for localhost development
                if (window.location.origin.includes('localhost') || window.location.origin.includes('127.0.0.1')) {
                    console.log('ðŸ  Using mock login for localhost development');
                    
                    // Simulate API delay
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Mock successful login response
                    const mockData = {
                        success: true,
                        user: {
                            id: 1,
                            first_name: 'Demo',
                            last_name: 'User',
                            email: email
                        },
                        token: 'mock-token-' + Date.now()
                    };
                    
                    console.log('Mock login successful:', mockData);
                    
                    // Store login state
                    localStorage.setItem('userLoggedIn', 'true');
                    localStorage.setItem('userName', mockData.user.first_name + ' ' + mockData.user.last_name);
                    localStorage.setItem('userEmail', mockData.user.email);
                    localStorage.setItem('authToken', mockData.token);
                    localStorage.setItem('userId', mockData.user.id);
                    
                    // Debug: Verify localStorage was set
                    console.log('âœ… Mock login data stored in localStorage:', {
                        userLoggedIn: localStorage.getItem('userLoggedIn'),
                        userName: localStorage.getItem('userName'),
                        userEmail: localStorage.getItem('userEmail'),
                        authToken: localStorage.getItem('authToken'),
                        userId: localStorage.getItem('userId')
                    });
                    
                    // Update UI
                    updateLoginButton();
                    showToast('Login successful! Welcome back, ' + mockData.user.first_name + '!', 'success');
                    
                    // Close modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                    if (modal) modal.hide();
                    
                    // Clear form
                    document.getElementById('loginEmail').value = '';
                    document.getElementById('loginPassword').value = '';
                    
                    // Re-enable button
                    if (loginButton) {
                        loginButton.disabled = false;
                        loginButton.innerHTML = '<iconify-icon icon="material-symbols:login" class="me-2"></iconify-icon>Log In';
                    }
                    
                    window.loginRedirectPending = false;
                    
                    // Check if there's pending enrollment
                    if (window.pendingEnrollment) {
                        console.log('ðŸŽ“ Processing pending enrollment after login');
                        const courseData = window.pendingEnrollment;
                        window.pendingEnrollment = null;
                        
                        // Show success message and redirect
                        showToast(`Successfully enrolled in ${courseData.title}!`, 'success');
                        setTimeout(() => {
                            window.location.href = 'dashboard.html';
                        }, 2000);
                    } else {
                        // Redirect to dashboard
                        setTimeout(() => {
                            window.location.href = 'dashboard.html';
                        }, 1500);
                    }
                    
                    return;
                }
                
                // Production API call (original code)
                const apiUrl = (window.API_CONFIG && window.API_CONFIG.apiURL) || 'https://elbadry-production.up.railway.app/api';
                
                const response = await fetch(`${apiUrl}/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Login failed');
                }
                
                console.log('Login successful:', data);
                
                // Store login state
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', data.user.first_name + ' ' + data.user.last_name);
                localStorage.setItem('userEmail', data.user.email);
                localStorage.setItem('authToken', data.token);
                localStorage.setItem('userId', data.user.id);
                
                // Debug: Verify localStorage was set
                console.log('âœ… Login data stored in localStorage:', {
                    userLoggedIn: localStorage.getItem('userLoggedIn'),
                    userName: localStorage.getItem('userName'),
                    userEmail: localStorage.getItem('userEmail'),
                    authToken: localStorage.getItem('authToken') ? 'Set' : 'Not Set',
                    userId: localStorage.getItem('userId')
                });
                
                // Reset todo lists after successful login
                resetTodoLists();
                
                // Check for pending cart actions and handle them
                const pendingAction = handlePendingCartAction();
                if (pendingAction) {
                    console.log('ðŸŽ¯ Found pending cart action, processing...', pendingAction);
                    
                    // Handle different pending actions
                    if (pendingAction.action === 'enrollInCourse') {
                        // Prepare course for checkout
                        const course = courses[pendingAction.courseId];
                        if (course) {
                            const courseData = {
                                courseId: pendingAction.courseId,
                                id: pendingAction.courseId,
                                title: course.title,
                                price: parseFloat(course.price.replace(/EGP|Â£/g, '').replace(/\s/g, '').trim()),
                                instructor: course.instructor,
                                board: course.board,
                                image: course.image,
                                quantity: 1,
                                addedAt: new Date().toISOString()
                            };
                            cart = [courseData];
                            localStorage.setItem('cart', JSON.stringify(cart));
                            updateCartCount();
                            showToast(`Preparing ${course.title} for checkout...`, 'success');
                        }
                        // Redirect to checkout
                        setTimeout(() => {
                            window.location.href = 'checkout.html';
                        }, 1500);
                        return;
                    } else if (pendingAction.action === 'proceedToCheckout') {
                        // Restore cart and redirect to checkout ONLY if cart has items
                        if (pendingAction.cart && pendingAction.cart.length > 0) {
                            cart = pendingAction.cart;
                            localStorage.setItem('cart', JSON.stringify(cart));
                            updateCartCount();
                            showToast('Redirecting to checkout...', 'success');
                            setTimeout(() => {
                                window.location.href = 'checkout.html';
                            }, 1500);
                            return;
                        } else {
                            // Cart is empty, don't redirect to checkout
                            console.log('Cart is empty, skipping checkout redirect');
                            showToast('Your cart is empty', 'info');
                        }
                    }
                }
                
                // Add login activity
                addActivity('Welcome Back!', `You've successfully logged in to your account.`, 'primary', 'material-symbols:login');
                
                showToast('Login successful!', 'success');
                
                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                if (modal) modal.hide();
                
                // Clear form
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                // Reset password visibility to hidden
                const loginPasswordInput = document.getElementById('loginPassword');
                const loginPasswordToggle = document.getElementById('loginPasswordToggle');
                if (loginPasswordInput.type === 'text') {
                    loginPasswordInput.type = 'password';
                    loginPasswordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    loginPasswordToggle.style.color = '#6b7280';
                }
                
                // Handle post-login enrollment if pending
                if (typeof handlePostLoginEnrollment === 'function') {
                    handlePostLoginEnrollment();
                }
                
                // Update UI
                checkLoginState();
                
                // Check if user is a parent - redirect to parent dashboard
                if (data.user.userType === 'parent') {
                    console.log('âœ… Parent logged in, redirecting to parent dashboard');
                    window.location.href = 'parent-dashboard.html';
                    return;
                }
                
                // Check for pending orders first
                try {
                    console.log('ðŸ” Step 1: Checking order status for user ID:', data.user.id);
                    const apiUrl = (window.API_CONFIG && window.API_CONFIG.apiURL) || 'https://elbadry-production.up.railway.app/api';
                    const orderStatusResponse = await fetch(`${apiUrl}/orders/status/${data.user.id}`, {
                        headers: { 'Authorization': `Bearer ${data.token}` }
                    });
                    
                    console.log('ðŸ” Step 2: Order status response received:', orderStatusResponse.status);
                    
                    if (orderStatusResponse.ok) {
                        const orderStatus = await orderStatusResponse.json();
                        console.log('ðŸ“¦ Step 3: Order status data:', orderStatus);
                        console.log('   - Status:', orderStatus.status);
                        console.log('   - Has Access:', orderStatus.hasAccess);
                        console.log('   - Approved Orders:', orderStatus.approvedOrders);
                        console.log('   - Pending Orders:', orderStatus.pendingOrders);
                        
                        // If user has pending orders, redirect to order processing page
                        if (orderStatus.status === 'pending' && orderStatus.approvedOrders === 0) {
                            console.log('â³ Step 4: User has pending order (no approved orders yet), performing immediate redirect');
                            window.location.href = 'order-processing.html';
                            return;
                        }
                        
                        // If user has approved order or active enrollments, redirect based on courses
                        if (orderStatus.hasAccess || orderStatus.status === 'approved' || orderStatus.approvedOrders > 0) {
                            console.log('âœ… Step 4: User has access to courses, checking for specific course purchases');
                            console.log('   - Condition check: hasAccess=' + orderStatus.hasAccess + ', status=' + orderStatus.status + ', approvedOrders=' + orderStatus.approvedOrders);
                            
                            // Check for specific course purchases and redirect accordingly
                            try {
                                console.log('ðŸ” Step 5: Fetching user orders by email:', data.user.email);
                                
                                // Use email-based endpoint which doesn't require admin access
                                const apiUrl = (window.API_CONFIG && window.API_CONFIG.apiURL) || 'https://elbadry-production.up.railway.app/api';
                                const orderDetailsResponse = await fetch(`${apiUrl}/orders/by-email/${encodeURIComponent(data.user.email)}`);
                                
                                if (orderDetailsResponse.ok) {
                                    const orderDetails = await orderDetailsResponse.json();
                                    console.log('ðŸ“‹ User orders:', orderDetails);
                                    
                                    const userOrders = orderDetails.orders || [];
                                    
                                    let redirectUrl = 'homenocourses.html'; // Default
                                    
                                    // Check courses in each order
                                    for (const order of userOrders) {
                                        const courses = typeof order.courses === 'string' ? JSON.parse(order.courses) : order.courses;
                                        console.log('ðŸ“š Checking courses:', courses);
                                        
                                        if (Array.isArray(courses)) {
                                            // Handle array of course objects
                                            const courseNames = courses.map(c => typeof c === 'string' ? c : (c.title || c.name || ''));
                                            
                                            if (courseNames.some(name => name.toLowerCase().includes('english'))) {
                                                redirectUrl = 'english-dashboard.html';
                                                console.log('âœ… Redirecting to English dashboard');
                                                break;
                                            }
                                            
                                            if (courseNames.some(name => name.toLowerCase().includes('mathematics') || name.toLowerCase().includes('math'))) {
                                                redirectUrl = 'mathematics-dashboard.html';
                                                console.log('âœ… Redirecting to Mathematics dashboard');
                                                break;
                                            }
                                            
                                            if (courseNames.some(name => name.toLowerCase().includes('physics'))) {
                                                redirectUrl = 'physics-dashboard.html';
                                                console.log('âœ… Redirecting to Physics dashboard');
                                                break;
                                            }
                                        } else if (typeof courses === 'string') {
                                            // Handle single course string
                                            if (courses.toLowerCase().includes('english')) {
                                                redirectUrl = 'english-dashboard.html';
                                                console.log('âœ… Redirecting to English dashboard');
                                                break;
                                            }
                                            
                                            if (courses.toLowerCase().includes('mathematics') || courses.toLowerCase().includes('math')) {
                                                redirectUrl = 'mathematics-dashboard.html';
                                                console.log('âœ… Redirecting to Mathematics dashboard');
                                                break;
                                            }
                                            
                                            if (courses.toLowerCase().includes('physics')) {
                                                redirectUrl = 'physics-dashboard.html';
                                                console.log('âœ… Redirecting to Physics dashboard');
                                                break;
                                            }
                                        }
                                    }
                                    
                                    console.log('ðŸŽ¯ Step 6: Final redirect URL:', redirectUrl);
                                    console.log('ðŸš€ Executing immediate redirect to:', redirectUrl);
                                    window.location.href = redirectUrl;
                                    return;
                                } else {
                                    console.log('âš ï¸ Failed to fetch orders:', orderDetailsResponse.status);
                                    // Fall through to fallback redirection below
                                }
                            } catch (courseError) {
                                console.error('âŒ Error checking course details:', courseError);
                                // Fall through to fallback redirection below
                            }
                            
                            // Fallback to role-based redirection (only if above didn't succeed)
                            console.log('ðŸ“ Using fallback redirection for role:', data.user.role);
                            if (data.user.role === 'parent') {
                                window.location.href = 'parent-dashboard.html';
                                return;
                            } else if (data.user.role === 'admin') {
                                window.location.href = 'admin-panel.html';
                                return;
                            } else {
                                console.log('ðŸš€ Fallback redirect to homenocourses.html');
                                window.location.href = 'homenocourses.html';
                                return;
                            }
                        }
                        
                        // If we reach here, user has no approved orders or access
                        console.log('ðŸ  Step 7: User has no approved orders, performing immediate redirect');
                        console.log('ðŸ”’ Setting redirect flag to prevent duplicates');
                        window.loginRedirectPending = true;
                        
                        // Prevent back button issues
                        window.history.replaceState(null, null, window.location.href);
                        window.location.replace('homenocourses.html');
                        return;
                    }
                } catch (orderError) {
                    console.error('Error checking order status:', orderError);
                    // If order check fails, redirect to homenocourses as fallback
                    console.log('âš ï¸ Step 8 (Error): Order check failed, performing immediate redirect');
                    console.log('ðŸ”’ Setting redirect flag to prevent duplicates');
                    window.loginRedirectPending = true;
                    
                    // Prevent back button issues
                    window.history.replaceState(null, null, window.location.href);
                    window.location.replace('homenocourses.html');
                    return;
                }
            } catch (error) {
                console.error('Login error:', error);
                showToast('Login failed: ' + error.message, 'error');
                // Reset redirect flag on error to allow retry
                window.loginRedirectPending = false;
                
                // Re-enable login button
                const loginButton = document.querySelector('button[onclick="handleLoginClick()"]');
                if (loginButton) {
                    loginButton.disabled = false;
                    loginButton.textContent = 'Login';
                }
            }
        }

        // Register function - now uses API
        async function handleRegisterClick() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.toLowerCase().trim();
            const phone = document.getElementById('phone').value.trim();
            const parentPhone = document.getElementById('parentPhone').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            const userType = document.getElementById('userType').value;
            
            if (!firstName || !lastName || !email || !password || !userType) {
                showToast('Please fill in all required fields', 'warning');
                return;
            }
            
            // Only require parent phone for students, not for parents or teachers
            if (userType === 'student' && !parentPhone) {
                showToast('Please provide parent/guardian phone number', 'warning');
                return;
            }
            
            // For parents, the phone field becomes their own phone (optional)
            // For teachers, parent phone is not required
            if (userType === 'parent') {
                // Parent phone field is optional for parents (it's their own phone)
            } else if (userType === 'teacher') {
                // Parent phone not required for teachers
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'warning');
                return;
            }
            
            if (password.length < 6) {
                showToast('Password must be at least 6 characters long', 'warning');
                return;
            }
            
            if (!agreeTerms) {
                showToast('Please agree to the Terms and Conditions', 'warning');
                return;
            }
            
            // Validate phone numbers
            if (phone && !validateMiddleEastPhone('phone')) {
                showToast('Please enter a valid phone number', 'warning');
                return;
            }
            
            // Validate parent phone for students, or own phone for parents
            if (userType === 'student' && parentPhone && !validateMiddleEastPhone('parentPhone')) {
                showToast('Please enter a valid phone number for parent/guardian phone', 'warning');
                return;
            }
            
            if (userType === 'parent' && parentPhone && !validateMiddleEastPhone('parentPhone')) {
                showToast('Please enter a valid phone number', 'warning');
                return;
            }
            
            try {
                console.log('Registering user:', { firstName, lastName, email, phone, parentPhone });
                
                // Get country codes
                const phoneCountry = document.getElementById('phoneCountry').value;
                const parentPhoneCountry = document.getElementById('parentPhoneCountry').value;
                
                // Use API_CONFIG to get the correct API URL
                const apiUrl = (window.API_CONFIG && window.API_CONFIG.apiURL) || 'https://elbadry-production.up.railway.app/api';
                
                const response = await fetch(`${apiUrl}/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        first_name: firstName, 
                        last_name: lastName, 
                        email, 
                        password,
                        phone,
                        phone_country: phoneCountry,
                        parent_phone: userType === 'student' ? parentPhone : (userType === 'parent' ? parentPhone : null),
                        parent_phone_country: userType === 'student' ? parentPhoneCountry : (userType === 'parent' ? parentPhoneCountry : null),
                        role: userType,
                        userType: userType
                    })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Registration failed');
                }
                
                console.log('Registration successful:', data);
                
                // Store login state
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', data.user.first_name + ' ' + data.user.last_name);
                localStorage.setItem('userEmail', data.user.email);
                localStorage.setItem('authToken', data.token);
                localStorage.setItem('userId', data.user.id);
                
                // Handle post-registration enrollment if pending
                const hasPendingEnrollment = localStorage.getItem('pendingEnrollment');
                if (hasPendingEnrollment && typeof handlePostLoginEnrollment === 'function') {
                    handlePostLoginEnrollment();
                    return; // Exit early as we're redirecting to checkout
                }
                
                // Check for pending cart actions and handle them
                const pendingAction = handlePendingCartAction();
                if (pendingAction) {
                    console.log('ðŸŽ¯ Found pending cart action after registration, processing...', pendingAction);
                    
                    // Handle different pending actions
                    if (pendingAction.action === 'enrollInCourse') {
                        // Prepare course for checkout
                        const course = courses[pendingAction.courseId];
                        if (course) {
                            const courseData = {
                                courseId: pendingAction.courseId,
                                id: pendingAction.courseId,
                                title: course.title,
                                price: parseFloat(course.price.replace(/EGP|Â£/g, '').replace(/\s/g, '').trim()),
                                instructor: course.instructor,
                                board: course.board,
                                image: course.image,
                                quantity: 1,
                                addedAt: new Date().toISOString()
                            };
                            cart = [courseData];
                            localStorage.setItem('cart', JSON.stringify(cart));
                            updateCartCount();
                            showToast(`Preparing ${course.title} for checkout...`, 'success');
                        }
                        // Redirect to checkout
                        setTimeout(() => {
                            window.location.href = 'checkout.html';
                        }, 1500);
                        return;
                    } else if (pendingAction.action === 'proceedToCheckout') {
                        // Restore cart and redirect to checkout ONLY if cart has items
                        if (pendingAction.cart && pendingAction.cart.length > 0) {
                            cart = pendingAction.cart;
                            localStorage.setItem('cart', JSON.stringify(cart));
                            updateCartCount();
                            showToast('Redirecting to checkout...', 'success');
                            setTimeout(() => {
                                window.location.href = 'checkout.html';
                            }, 1500);
                            return;
                        } else {
                            // Cart is empty, don't redirect to checkout
                            console.log('Cart is empty after registration, skipping checkout redirect');
                            showToast('Your cart is empty', 'info');
                        }
                    }
                }
                
                // Add registration activity
                addActivity('Account Created!', `Welcome to IG Way! Your account has been created successfully.`, 'success', 'material-symbols:person-add');
                
                showToast('Registration successful!', 'success');
                
                // Close modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('registerModal'));
                if (modal) modal.hide();
                
                // Clear form
                document.getElementById('firstName').value = '';
                document.getElementById('lastName').value = '';
                document.getElementById('email').value = '';
                document.getElementById('phone').value = '';
                document.getElementById('parentPhone').value = '';
                document.getElementById('password').value = '';
                document.getElementById('confirmPassword').value = '';
                document.getElementById('agreeTerms').checked = false;
                
                // Reset password visibility to hidden
                const passwordInput = document.getElementById('password');
                const passwordToggle = document.getElementById('passwordToggle');
                const confirmPasswordInput = document.getElementById('confirmPassword');
                const confirmPasswordToggle = document.getElementById('confirmPasswordToggle');
                
                if (passwordInput.type === 'text') {
                    passwordInput.type = 'password';
                    passwordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    passwordToggle.style.color = '#6b7280';
                }
                
                if (confirmPasswordInput.type === 'text') {
                    confirmPasswordInput.type = 'password';
                    confirmPasswordToggle.setAttribute('icon', 'heroicons:eye-slash-20-solid');
                    confirmPasswordToggle.style.color = '#6b7280';
                }
                
                // Update UI
                checkLoginState();
                
                // Check for existing orders and redirect accordingly
                setTimeout(async () => {
                    try {
                        // Check if user is a parent - redirect to parent dashboard
                        if (userType === 'parent') {
                            console.log('âœ… Parent registered, redirecting to parent dashboard');
                            window.location.href = 'parent-dashboard.html';
                            return;
                        }
                        
                        const existingOrders = await api.getOrdersByEmail(email);
                        let redirectUrl = 'homenocourses.html'; // Default to no courses page
                        
                        if (existingOrders.length > 0) {
                            console.log('ðŸ“‹ Found existing orders for user:', existingOrders);
                            
                            // Check courses in existing orders
                            for (const order of existingOrders) {
                                const courses = typeof order.courses === 'string' ? JSON.parse(order.courses) : order.courses;
                                
                                if (courses.includes('IGCSE English Language') || 
                                    courses.includes('English') || 
                                    courses.some(course => course.toLowerCase().includes('english'))) {
                                    redirectUrl = 'english-dashboard.html';
                                    console.log('âœ… Redirecting to English dashboard');
                                    break;
                                }
                                
                                if (courses.includes('IGCSE Mathematics') || 
                                    courses.includes('Mathematics') || 
                                    courses.some(course => course.toLowerCase().includes('mathematics'))) {
                                    redirectUrl = 'mathematics-dashboard.html';
                                    console.log('âœ… Redirecting to Mathematics dashboard');
                                    break;
                                }
                                
                                if (courses.includes('IGCSE Physics') || 
                                    courses.includes('Physics') || 
                                    courses.some(course => course.toLowerCase().includes('physics'))) {
                                    redirectUrl = 'physics-dashboard.html';
                                    console.log('âœ… Redirecting to Physics dashboard');
                                    break;
                                }
                            }
                        } else {
                            console.log('ðŸ  No existing orders found, redirecting to homenocourses.html');
                        }
                        
                        // Redirect to appropriate page
                        window.location.href = redirectUrl;
                    } catch (error) {
                        console.error('Error checking orders:', error);
                        // Fallback to no courses page
                        window.location.href = 'homenocourses.html';
                    }
                }, 1500);
            } catch (error) {
                console.error('Registration error:', error);
                showToast('Registration failed: ' + error.message, 'error');
            }
        }

        // Forgot Password Functions
        function showForgotPassword() {
            // Close login modal
            const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            if (loginModal) loginModal.hide();
            
            // Open forgot password modal
            const forgotModal = new bootstrap.Modal(document.getElementById('forgotPasswordModal'));
            forgotModal.show();
            
            // Reset to step 1
            resetForgotPasswordSteps();
        }

        function resetForgotPasswordSteps() {
            document.getElementById('forgotPasswordStep1').style.display = 'block';
            document.getElementById('forgotPasswordStep2').style.display = 'none';
            document.getElementById('forgotPasswordStep3').style.display = 'none';
            
            // Clear all inputs
            document.getElementById('forgotEmail').value = '';
            document.getElementById('verificationCode').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
        }

        async function sendVerificationCode() {
            const email = document.getElementById('forgotEmail').value;
            
            if (!email) {
                showToast('Please enter your email address', 'warning');
                return;
            }
            
            try {
                const apiUrl = (window.API_CONFIG && window.API_CONFIG.apiURL) || 'https://elbadry-production.up.railway.app/api';
                const response = await fetch(`${apiUrl}/forgot-password`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    // Check if account doesn't exist
                    if (data.redirectToRegister) {
                        showToast(data.message, 'warning');
                        
                        // Close forgot password modal
                        const forgotModal = bootstrap.Modal.getInstance(document.getElementById('forgotPasswordModal'));
                        if (forgotModal) forgotModal.hide();
                        
                        // Show register modal after a short delay
                        setTimeout(() => {
                            const registerModal = new bootstrap.Modal(document.getElementById('registerModal'));
                            registerModal.show();
                            
                            // Pre-fill email in registration form
                            document.getElementById('email').value = email;
                        }, 2000);
                        
                        return;
                    }
                    
                    throw new Error(data.error || 'Failed to send verification code');
                }
                
                showToast('Verification code sent to your email', 'success');
                
                // Show code in alert for development (when SMTP not configured)
                if (data.devCode) {
                    alert('ðŸ“§ Email Service Not Configured\n\nYour verification code is:\n\n' + data.devCode + '\n\nPlease enter this code in the next step.');
                }
                
                // Move to step 2
                document.getElementById('forgotPasswordStep1').style.display = 'none';
                document.getElementById('forgotPasswordStep2').style.display = 'block';
                document.getElementById('verificationEmail').textContent = email;
                
            } catch (error) {
                console.error('Send verification code error:', error);
                showToast('Failed to send verification code: ' + error.message, 'error');
            }
        }

        async function verifyCode() {
            const email = document.getElementById('forgotEmail').value;
            const verificationCode = document.getElementById('verificationCode').value;
            
            if (!verificationCode || verificationCode.length !== 6) {
                showToast('Please enter a valid 6-digit verification code', 'warning');
                return;
            }
            
            try {
                const apiUrl = (window.API_CONFIG && window.API_CONFIG.apiURL) || 'https://elbadry-production.up.railway.app/api';
                const response = await fetch(`${apiUrl}/verify-reset-code`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, verificationCode })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Invalid verification code');
                }
                
                showToast('Verification code is valid', 'success');
                
                // Move to step 3
                document.getElementById('forgotPasswordStep2').style.display = 'none';
                document.getElementById('forgotPasswordStep3').style.display = 'block';
                
            } catch (error) {
                console.error('Verify code error:', error);
                showToast('Invalid verification code: ' + error.message, 'error');
            }
        }

        async function resetPassword() {
            const email = document.getElementById('forgotEmail').value;
            const verificationCode = document.getElementById('verificationCode').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;
            
            if (!newPassword || !confirmNewPassword) {
                showToast('Please fill in all fields', 'warning');
                return;
            }
            
            if (newPassword !== confirmNewPassword) {
                showToast('Passwords do not match', 'warning');
                return;
            }
            
            if (newPassword.length < 6) {
                showToast('Password must be at least 6 characters long', 'warning');
                return;
            }
            
            try {
                const apiUrl = (window.API_CONFIG && window.API_CONFIG.apiURL) || 'https://elbadry-production.up.railway.app/api';
                const response = await fetch(`${apiUrl}/reset-password`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, verificationCode, newPassword })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Failed to reset password');
                }
                
                showToast('Password reset successfully! You can now login with your new password.', 'success');
                
                // Close modal and open login modal
                const forgotModal = bootstrap.Modal.getInstance(document.getElementById('forgotPasswordModal'));
                if (forgotModal) forgotModal.hide();
                
                const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
                loginModal.show();
                
                // Clear password field when modal opens
                setTimeout(() => {
                    document.getElementById('loginPassword').value = '';
                }, 100);
                
                // Reset forgot password form
                resetForgotPasswordSteps();
                
            } catch (error) {
                console.error('Reset password error:', error);
                showToast('Failed to reset password: ' + error.message, 'error');
            }
        }

        function resendVerificationCode() {
            sendVerificationCode();
        }

        function switchToRegister() {
            // Close forgot password modal
            const forgotModal = bootstrap.Modal.getInstance(document.getElementById('forgotPasswordModal'));
            if (forgotModal) forgotModal.hide();
            
            // Open register modal
            const registerModal = new bootstrap.Modal(document.getElementById('registerModal'));
            registerModal.show();
            
            // Pre-fill email if available
            const email = document.getElementById('forgotEmail').value;
            if (email) {
                document.getElementById('email').value = email;
            }
        }

        // Toast notification function
        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            const toastId = 'toast-' + Date.now();
            
            let icon = 'material-symbols:info';
            let bgClass = 'bg-primary';
            
            if (type === 'warning') {
                icon = 'material-symbols:warning';
                bgClass = 'bg-warning';
            } else if (type === 'success') {
                icon = 'material-symbols:check_circle';
                bgClass = 'bg-success';
            }
            
            const toastHTML = `
                <div class="toast" id="${toastId}" role="alert">
                    <div class="toast-header ${bgClass} text-white">
                        <iconify-icon icon="${icon}" class="me-2"></iconify-icon>
                        <strong class="me-auto">Notification</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                    </div>
                </div>
            `;
            
            toastContainer.insertAdjacentHTML('beforeend', toastHTML);
            
            const toastElement = document.getElementById(toastId);
            const toast = new bootstrap.Toast(toastElement, {
                autohide: true,
                delay: 3000
            });
            
            toast.show();
            
            toastElement.addEventListener('hidden.bs.toast', function() {
                toastElement.remove();
            });
        }

        // Course filtering and functionality
        function initCourseFiltering() {
            // Subject filter functionality
            $('.subject-filter').click(function() {
                $('.subject-filter').removeClass('active');
                $(this).addClass('active');
                
                var filterValue = $(this).attr('data-filter');
                filterCourses(filterValue);
            });
            
            // Sort option functionality (only Featured)
            $('.sort-option').click(function() {
                $('.sort-option').removeClass('active');
                $(this).addClass('active');
                
                var sortType = $(this).attr('data-sort');
                if (sortType === 'featured') {
                    sortCourses(sortType);
                }
            });
            
            // Initialize counts
            updateFilterCounts();
        }
        
        function filterCourses(filterValue) {
            if (filterValue === '*') {
                $('.item').show();
            } else {
                $('.item').hide();
                $(filterValue).show();
            }
        }
        
        function updateFilterCounts() {
            var counts = {
                'all-count': $('.item').length,
                'math-count': $('.item.mathematics').length,
                'physics-count': $('.item.physics').length,
                'chemistry-count': $('.item.chemistry').length,
                'english-count': $('.item.english').length
            };
            
            Object.keys(counts).forEach(function(key) {
                $('#' + key).text(counts[key]);
            });
        }
        
        function sortCourses(sortType) {
            var $container = $('.isotope-container');
            var $items = $container.find('.item:visible').toArray();
            
            if (sortType === 'featured') {
                $items.sort(function(a, b) {
                    var aFeatured = $(a).find('.featured-badge').length;
                    var bFeatured = $(b).find('.featured-badge').length;
                    return bFeatured - aFeatured;
                });
                
                // Re-append sorted items with animation
                $container.empty();
                $items.forEach(function(item, index) {
                    setTimeout(function() {
                        $container.append(item);
                    }, index * 100);
                });
            }
        }

        // Initialize course filtering when page loads
        $(document).ready(function() {
            initCourseFiltering();
            
            // Add event listener for userType change to show/hide phone fields
            const userTypeSelect = document.getElementById('userType');
            if (userTypeSelect) {
                userTypeSelect.addEventListener('change', function() {
                    const studentPhoneSection = document.getElementById('studentPhoneSection');
                    const parentPhoneSection = document.getElementById('parentPhoneSection');
                    const parentPhoneLabel = document.getElementById('parentPhoneLabel');
                    const parentPhoneText = document.getElementById('parentPhoneText');
                    
                    // Handle student phone section visibility
                    if (studentPhoneSection) {
                        if (this.value === 'parent') {
                            studentPhoneSection.style.display = 'none';
                        } else {
                            studentPhoneSection.style.display = 'block';
                        }
                    }
                    
                    // Handle parent phone section visibility and labels
                    if (parentPhoneSection) {
                        if (this.value === 'student') {
                            parentPhoneSection.style.display = 'block';
                            document.getElementById('parentPhone').required = true;
                            if (parentPhoneLabel) parentPhoneLabel.textContent = 'Parent/Guardian Phone Number *';
                            if (parentPhoneText) parentPhoneText.textContent = 'Required for student registration and communication';
                        } else if (this.value === 'parent') {
                            parentPhoneSection.style.display = 'block';
                            document.getElementById('parentPhone').required = false;
                            if (parentPhoneLabel) parentPhoneLabel.textContent = 'Your Phone Number';
                            if (parentPhoneText) parentPhoneText.textContent = 'Optional - for account verification and communication';
                            
                            // Show a welcome message for parents
                            showToast('Welcome! As a parent, you can monitor your child\'s progress and receive updates.', 'info');
                        } else {
                            parentPhoneSection.style.display = 'none';
                            document.getElementById('parentPhone').required = false;
                        }
                    }
                });
                
                // Trigger on page load to set initial state
                userTypeSelect.dispatchEvent(new Event('change'));
            }
        });

        // WhatsApp Chat Function
        function openWhatsAppChat() {
            const phoneNumber = '+201027500835';
            const message = encodeURIComponent('Hello! I need assistance with my IGCSE courses. Can you help me?');
            const whatsappUrl = `https://wa.me/${phoneNumber.replace('+', '')}?text=${message}`;
            
            // Open WhatsApp in a new tab
            window.open(whatsappUrl, '_blank');
            
            // Show a toast notification
            showToast('Opening WhatsApp to chat with our staff...', 'success');
        }

        // Video Function - Open YouTube video directly in same tab
        function openVideoModal() {
            // Open YouTube video directly in the same tab
            window.location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
        }

        // Phone validation for Egypt and Middle East
        function validateMiddleEastPhone(fieldId) {
            const phoneInput = document.getElementById(fieldId);
            const phoneError = document.getElementById('phoneError');
            const phone = phoneInput.value.trim();
            
            // Egyptian phone validation (01xxxxxxxxx)
            const egyptPhoneRegex = /^01[0-2]\d{8}$/;
            
            if (phone && !egyptPhoneRegex.test(phone)) {
                phoneError.style.display = 'block';
                phoneInput.classList.add('is-invalid');
                return false;
            } else {
                phoneError.style.display = 'none';
                phoneInput.classList.remove('is-invalid');
                return true;
            }
        }

        // Password visibility toggle
        function togglePasswordIconVisibility(fieldId, toggleBtnId) {
            const passwordInput = document.getElementById(fieldId);
            const toggleBtn = document.getElementById(toggleBtnId);
            
            if (passwordInput && toggleBtn) {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggleBtn.innerHTML = `<iconify-icon icon="material-symbols:visibility-off" style="font-size: 18px; color: #6b7280;"></iconify-icon>`;
                } else {
                    passwordInput.type = 'password';
                    toggleBtn.innerHTML = `<iconify-icon icon="material-symbols:visibility" style="font-size: 18px; color: #6b7280;"></iconify-icon>`;
                }
            }
        }

        // Login function
        function handleLoginClick() {
            const email = document.getElementById('loginEmail')?.value || '';
            const password = document.getElementById('loginPassword')?.value || '';

            if (!email || !password) {
                showToast('Please fill in all fields', 'warning');
                return;
            }

            // Mock login for Netlify
            if (!window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1')) {
                console.log('ðŸ§ª Mock login for:', email);
                
                // Store mock user data
                const mockUser = {
                    id: Date.now(),
                    email: email,
                    first_name: 'Test',
                    last_name: 'User'
                };
                
                const token = 'mock_token_' + Date.now();
                
                localStorage.setItem('authToken', token);
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userName', `${mockUser.first_name} ${mockUser.last_name}`);
                localStorage.setItem('userEmail', mockUser.email);
                localStorage.setItem('userId', mockUser.id);
                
                showToast('Login successful!', 'success');
                
                // Close modal
                const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                if (loginModal) {
                    loginModal.hide();
                }
                
                // Update UI
                checkLoginState();
                
                // Redirect to dashboard
                setTimeout(() => {
                    window.location.href = 'homenocourses.html';
                }, 1000);
                
                return;
            }

            // Real API call for localhost
            api.login({ email, password })
                .then(data => {
                    showToast('Login successful!', 'success');
                    
                    // Close modal
                    const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                    if (loginModal) {
                        loginModal.hide();
                    }
                    
                    // Update UI
                    checkLoginState();
                    
                    // Redirect to dashboard
                    setTimeout(() => {
                        window.location.href = 'homenocourses.html';
                    }, 1000);
                })
                .catch(error => {
                    console.error('Login error:', error);
                    showToast('Login failed. Please check your credentials.', 'error');
                });
        }
        
        // Cache busting - force reload
        console.log('ðŸ”„ Cache busting - Version: ' + Date.now() + ' - FORCED UPDATE');
    </script>
</body>
</html>
